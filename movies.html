<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CineWatch - Movies</title>
  
  <!-- Font Awesome CDN for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Inter Font (for consistent typography across the site) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Consolidated Main Stylesheet (copied from main.css and adapted) -->
  <style>
    /*
     * File: main.css
     * Description: Consolidated and updated styles for the CineWatch application,
     * including responsive design, new carousel layout, redesigned show cards,
     * and dark mode theming.
     * This version includes styling for new hero show/quote cards,
     * removal of border-radius in the hero section,
     * and reduced width for show cards in carousels.
     */

    /* Root Theme Variables */
    :root {
      --bg: #fff;
      --text: #111;
      --header-bg: #f0ecec;
      --search-bg: #f4f4f4;
      --highlight: rgb(28, 12, 241); /* Blue used for highlight */
      --danger: #f44336;
      --cinewatch-blue: #000080; /* Dark blue color for CineWatch name */

      /* Variables for custom message box & dropdown in light mode */
      --message-box-bg: #fff;
      --message-box-text: #111;
      --message-box-border: #ccc;
      --message-box-button-bg: #007bff;
      --message-box-button-text: white;
      --message-box-button-hover-bg: #0056b3;

      --dropdown-bg: #fff;
      --dropdown-item-hover-bg: #f0f0f0;
      --dropdown-border: #ddd;

      /* Specific for carousel */
      --carousel-bg: #f0f0f0;
      --card-bg: #ffffff;
      --card-border: #e0e0e0;
      --card-shadow: rgba(0, 0, 0, 0.1);
      --play-icon-color: rgba(255, 255, 255, 0.8);
      --play-icon-hover-color: rgba(255, 255, 255, 1);

       /* Additional variables for the new footer */
      --primary-color: #0056b3; /* A vibrant blue for main accents and headings */
      --secondary-color: #007bff; /* A slightly lighter blue for links and secondary actions */
      --accent-color: #f39c12; /* Orange for highlights and call-to-action elements */
      --text-color-light: #2C3E50; /* Dark, almost black blue-gray for readability */
      --background-color-light: #F0F8FF; /* Alice Blue - very light, airy blue */
      --section-bg-light: #E6F7FF; /* Pale blue for section backgrounds */
      --border-color-light: #A0D9EF; /* Medium blue for borders */
      --shadow-color-light: rgba(70, 130, 180, 0.2); /* Steel blue with transparency for subtle shadow */
      --header-bg-light: #C9EEFF; /* Light Cyan-like blue for headers */

      /* Footer specific grey colors */
      --footer-bg-light-grey: #e0e0e0; /* Light grey for footer in light mode */
      --footer-bg-dark-grey: #333333; /* Darker grey for footer in dark mode */
    }
    

    /* Dark Mode Theme Variables */
    body.dark-mode {
      --bg: #1a1a1a;
      --text: #f0f0f0;
      --header-bg: #2a2a2a;
      --search-bg: #3a3a3a;
      --highlight: #6699ff; /* Lighter blue for dark mode highlight */
      --danger: #ff6b6b;
      --cinewatch-blue: #ADD8E6; /* Light blue for CineWatch name in dark mode */

      /* Variables for custom message box & dropdown in dark mode */
      --message-box-bg: #333;
      --message-box-text: #f0f0f0;
      --message-box-border: #555;
      --message-box-button-bg: #6699ff;
      --message-box-button-text: #111;
      --message-box-button-hover-bg: #4477ee;

      --dropdown-bg: #333;
      --dropdown-item-hover-bg: #444;
      --dropdown-border: #555;

      /* Specific for carousel in dark mode */
      --carousel-bg: #2a2a2a;
      --card-bg: #3a3a3a;
      --card-border: #444;
      --card-shadow: rgba(0, 0, 0, 0.3);
    }

    /* Base Styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      color: var(--text);
      background-color: var(--bg);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    a {
      color: var(--highlight);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    img {
        max-width: 100%;
        height: auto;
        display: block; /* Removes extra space below image */
    }

    /* --- Header --- */
    #utilityHeader {
      position: sticky;
      top: 0;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: var(--header-bg);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      transition: background-color 0.3s ease;
    }

    #utilityHeader .logo {
      font-weight: 700;
      font-size: 1.8rem;
    }

    #utilityHeader .logo a {
      color: var(--cinewatch-blue);
      text-decoration: none;
    }

    .header-icons {
      display: flex;
      gap: 20px;
    }

    .header-icons i {
      font-size: 1.4rem;
      cursor: pointer;
      color: var(--text);
      transition: color 0.2s ease, transform 0.2s ease;
    }

    .header-icons i:hover {
      color: var(--highlight);
      transform: scale(1.1);
    }

    /* --- Search Subheader --- */
    .search-subheader {
      position: absolute;
      top: 60px; /* Below the header */
      right: 0; /* Start from the right */
      width: 100%;
      max-width: 500px; /* Limit width to give animation space */
      background-color: var(--search-bg);
      padding: 10px 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 999; /* Below header, above main content */
      transform: translateX(100%); /* Start hidden off-screen to the right */
      transition: transform 0.3s ease-in-out;
      display: flex; /* Use flex for layout */
      flex-direction: column; /* Stack input and suggestions */
      gap: 10px;
      border-bottom-left-radius: 8px;
      border-bottom-right-radius: 8px;
    }

    .search-subheader.visible {
      transform: translateX(0); /* Slide in from the right */
    }

    .search-bar-container {
      display: flex;
      align-items: center;
      width: 100%;
      border: 1px solid var(--dropdown-border);
      border-radius: 20px;
      background-color: var(--bg);
      padding: 5px 15px;
    }

    #searchInput {
      flex-grow: 1;
      border: none;
      padding: 8px;
      font-size: 1rem;
      background-color: transparent;
      color: var(--text);
      outline: none;
    }

    #searchInput::placeholder {
      color: var(--text); /* Adjust placeholder color */
      opacity: 0.7;
    }

    .clear-search-btn {
      background: none;
      border: none;
      color: var(--text);
      font-size: 1rem;
      cursor: pointer;
      padding: 5px;
      transition: color 0.2s ease;
    }

    .clear-search-btn:hover {
      color: var(--danger);
    }

    .suggestions-box {
      width: calc(100% - 40px); /* Adjust for padding of search-subheader */
      background-color: var(--dropdown-bg);
      border: 1px solid var(--dropdown-border);
      border-radius: 8px;
      max-height: 200px;
      overflow-y: auto;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      position: relative; /* Relative to search-subheader */
      left: 0;
      top: 0;
      display: none; /* Hidden by default */
    }

    .suggestions-box.visible {
      display: block;
    }

    .suggestion-item {
      padding: 10px 15px;
      cursor: pointer;
      color: var(--text);
      border-bottom: 1px solid var(--dropdown-border);
    }

    .suggestion-item:last-child {
      border-bottom: none;
    }

    .suggestion-item:hover {
      background-color: var(--dropdown-item-hover-bg);
    }

    .suggestion-item.primary-suggestion {
      font-weight: 500;
      color: var(--highlight);
    }


    /* --- Account Dropdown --- */
    .account-dropdown {
      position: absolute;
      top: 60px; /* Below header */
      right: 20px;
      background-color: var(--dropdown-bg);
      border: 1px solid var(--dropdown-border);
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      display: none; /* Hidden by default */
      flex-direction: column;
      min-width: 180px; /* Increased min-width for new links */
      padding: 10px 0;
      z-index: 1000;
    }

    .account-dropdown.visible {
      display: flex;
    }

    .account-dropdown a {
      padding: 10px 15px;
      color: var(--text);
      text-decoration: none;
      white-space: nowrap;
      transition: background-color 0.2s ease;
      display: flex; /* For icons */
      align-items: center; /* For icons */
    }

    .account-dropdown a i {
        margin-right: 10px; /* Space between icon and text */
    }

    .account-dropdown a:hover {
      background-color: var(--dropdown-item-hover-bg);
      text-decoration: none;
    }

    .account-dropdown .logout-item {
        color: var(--danger);
        border-top: 1px solid var(--dropdown-border);
        margin-top: 5px;
        padding-top: 10px;
    }

    .account-dropdown .logout-item:hover {
        background-color: var(--danger);
        color: white;
    }


    /* --- Main Subheader with Tagline and Nav --- */
    .main-subheader {
        background-color: var(--header-bg);
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap; /* Allow wrapping on smaller screens */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        z-index: 990; /* Below search subheader, above main content */
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
    }

    .site-tagline {
        font-size: 1.1rem;
        color: var(--text);
        font-weight: 500;
        margin: 5px 0;
    }

    .main-nav ul {
        list-style: none;
        display: flex;
        gap: 25px;
    }

    .main-nav a {
        color: var(--cinewatch-blue);
        font-weight: 600;
        font-size: 1rem;
        transition: color 0.2s ease, text-decoration 0.2s ease;
        white-space: nowrap; /* Prevent nav items from wrapping */
    }

    .main-nav a:hover {
        color: var(--highlight);
        text-decoration: underline;
    }


    /* --- Mobile Navigation Overlay --- */
    .mobile-nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 1001;
      display: flex;
      justify-content: center;
      align-items: center;
      visibility: hidden;
      opacity: 0;
      transition: visibility 0.3s ease, opacity 0.3s ease;
    }

    .mobile-nav-overlay.show {
      visibility: visible;
      opacity: 1;
    }

    .mobile-nav-content {
      background-color: var(--bg);
      padding: 30px;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: relative;
      width: 80%; /* Adjust for mobile screen */
      max-width: 300px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .mobile-nav-content .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.5rem;
      color: var(--text);
      cursor: pointer;
    }

    .mobile-nav-content a {
      color: var(--text);
      font-size: 1.2rem;
      font-weight: 500;
      padding: 10px;
      text-align: center;
      border-radius: 5px;
      transition: background-color 0.2s ease, color 0.2s ease;
      display: flex; /* For icons */
      align-items: center; /* For icons */
      justify-content: center; /* Center text and icon */
    }
    .mobile-nav-content a i {
        margin-right: 10px;
    }

    .mobile-nav-content a:hover,
    .mobile-nav-content a.active {
      background-color: var(--highlight);
      color: white;
      text-decoration: none;
    }

    .mobile-login-btn, .mobile-logout-btn {
      margin-top: 20px;
      background-color: var(--cinewatch-blue);
      color: white;
      font-weight: bold;
    }

    .mobile-login-btn:hover, .mobile-logout-btn:hover {
        background-color: var(--highlight);
    }

    /* --- Custom Alert/Message Box --- */
    .custom-alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      visibility: hidden;
      opacity: 0;
      transition: visibility 0.3s ease, opacity 0.3s ease;
    }

    .custom-alert-overlay.show {
      visibility: visible;
      opacity: 1;
    }

    .alert-content {
      background-color: var(--message-box-bg);
      color: var(--message-box-text);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      text-align: center;
      max-width: 400px;
      width: 90%;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      border: 1px solid var(--message-box-border);
    }

    .alert-icon {
      font-size: 3rem;
      margin-bottom: 10px;
    }

    /* Icon Colors */
    .blue-icon { color: var(--highlight); }
    .green-icon { color: #28a745; }
    .red-icon { color: var(--danger); }
    .orange-icon { color: #ffc107; }

    #alertMessage {
      font-size: 1.1rem;
      margin-bottom: 15px;
      word-wrap: break-word;
    }

    .close-alert-btn {
      background-color: var(--message-box-button-bg);
      color: var(--message-box-button-text);
      border: none;
      padding: 10px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .close-alert-btn:hover {
      background-color: var(--message-box-button-hover-bg);
      transform: translateY(-1px);
    }

    /* Footer Styles */
    .site-footer {
        background-color: var(--footer-bg-light-grey); /* Changed to light grey */
        color: var(--text-color-light);
        padding: 2rem 0;
        margin-top: auto;
        box-shadow: 0 -2px 5px var(--shadow-color-light);
        transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
    }

    body.dark-mode .site-footer {
        background-color: var(--footer-bg-dark-grey); /* Changed to darker grey */
        color: var(--text-color-dark);
        box-shadow: 0 -2px 5px var(--shadow-color-dark);
    }

    .footer-content {
        display: flex;
        flex-direction: row; /* Single row on large screens */
        flex-wrap: wrap; /* Allow items to wrap if screen is not wide enough */
        justify-content: space-around; /* Distribute items with space around them */
        gap: 20px;
        max-width: 1200px; /* Increased max-width for better multi-column display */
        margin: 0 auto; /* Center the footer content */
        padding: 0 20px; /* Add padding for content inside footer */
        text-align: left; /* Default text alignment for multi-column */
    }

    .footer-section {
        flex: 1; /* Allow sections to grow and shrink */
        min-width: 200px; /* Minimum width for each column */
        max-width: 250px; /* Maximum width for each column to prevent excessive stretching */
        text-align: left; /* Align text left within each section */
    }

    .footer-section h3 {
        font-size: 1.2rem;
        margin-bottom: 1rem;
        color: var(--primary-color);
    }

    body.dark-mode .footer-section h3 {
        color: var(--accent-color);
    }

    .footer-section p,
    .footer-section a {
        font-size: 0.9rem;
        color: inherit;
        text-decoration: none;
        display: block;
        margin-bottom: 0.5rem;
        transition: color 0.3s ease;
    }

    .footer-section a:hover {
        color: var(--secondary-color); /* Apply hover color */
        text-decoration: underline; /* Add underline on hover */
    }

    /* Social Icons Container */
    .social-icons { 
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 1rem;
    }

    .social-icons img {
        height: 30px;
        width: 30px;
        transition: transform 0.2s ease, filter 0.3s ease;
    }

    .social-icons img:hover {
        transform: scale(1.1);
    }



    /* Responsive adjustments */
    @media (max-width: 768px) {
         .faq-question {
            font-size: 1em;
            padding: 12px 15px;
        }
        
        .footer-content {
            flex-direction: column; /* Stack vertically on small screens */
            align-items: center;
            text-align: center; /* Center text for stacked layout */
        }
        .footer-section {
            width: 100%; /* Full width for sections on small screens */
            max-width: unset; /* Remove max-width constraint */
            text-align: center; /* Center text within sections on mobile */
        }
        .social-icons {
            justify-content: center; /* Ensure social icons remain centered on mobile */
        }
    }
    /* --- Page Specific Styles for Movies/TV Shows Listing --- */
    .content-main {
        padding: 40px 20px;
        max-width: 1200px;
        margin: 0 auto;
        background-color: var(--bg);
        transition: background-color 0.3s ease;
    }

    .page-title {
        font-size: 2.5rem;
        color: var(--text);
        margin-bottom: 30px;
        text-align: center;
    }

    .sort-controls {
        display: flex;
        justify-content: flex-end; /* Align to the right */
        align-items: center;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap; /* Allow wrapping on small screens */
    }

    .sort-controls label {
        color: var(--text);
        font-weight: 500;
    }

    .sort-controls select {
        padding: 8px 12px;
        border: 1px solid var(--card-border);
        border-radius: 8px;
        background-color: var(--card-bg);
        color: var(--text);
        font-size: 1rem;
        cursor: pointer;
        outline: none;
        appearance: none; /* Remove default select arrow */
        background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23111%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13.2-6.5H18.6c-5%200-9.3%201.8-13.2%206.5C1.8%2073.3%200%2077.5%200%2082.5c0%205%201.8%209.3%205.4%2013.2l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095.7c3.6-3.5%205.4-7.8%205.4-12.8%200-5-1.8-9.3-5.4-13.2z%22%2F%3E%3C%2Fsvg%3E'); /* Custom arrow */
        background-repeat: no-repeat;
        background-position: right 10px top 50%;
        background-size: 12px;
    }
    body.dark-mode .sort-controls select {
        background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23f0f0f0%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13.2-6.5H18.6c-5%200-9.3%201.8-13.2%206.5C1.8%2073.3%200%2077.5%200%2082.5c0%205%201.8%209.3%205.4%2013.2l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095.7c3.6-3.5%205.4-7.8%205.4-12.8%200-5-1.8-9.3-5.4-13.2z%22%2F%3E%3C%2Fsvg%3E'); /* Custom arrow for dark mode */
    }

    .movies-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* 3 per column */
        gap: 30px;
    }

    .movie-card {
        background-color: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 15px;
        box-shadow: 0 4px 10px var(--card-shadow);
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        display: flex;
        flex-direction: column;
        cursor: pointer; /* Make the entire card clickable */
    }

    .movie-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .movie-card-poster-container {
      position: relative;
      width: 100%;
      height: 0;
      padding-bottom: 140%; /* Aspect ratio for posters */
      overflow: hidden;
      border-bottom: 1px solid var(--card-border);
    }

    .movie-card-poster {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-top-left-radius: 15px;
      border-top-right-radius: 15px;
    }

    .movie-card-details {
        padding: 20px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .movie-card-title {
        font-size: 1.5rem;
        color: var(--text);
        margin-bottom: 10px;
        line-height: 1.2;
    }

    .movie-card-meta {
        font-size: 0.95rem;
        color: var(--text);
        opacity: 0.8;
        margin-bottom: 15px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .movie-card-meta span {
        white-space: nowrap;
    }

    .movie-card-meta span i {
        color: gold;
        margin-right: 5px;
    }

    .movie-card-description {
        font-size: 0.95rem;
        color: var(--text);
        opacity: 0.9;
        margin-bottom: 15px;
        line-height: 1.6;
    }

    .description-collapsed {
        display: -webkit-box;
        -webkit-line-clamp: 3; /* Show 3 lines */
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .read-more-btn {
        background: none;
        border: none;
        color: var(--highlight);
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 600;
        margin-top: 5px;
    }

    .movie-card-actions {
        display: flex;
        flex-direction: column; /* Stack buttons */
        gap: 10px;
        margin-top: auto; /* Push to bottom */
        padding-top: 15px;
        border-top: 1px solid var(--card-border);
    }

    .network-info {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
        font-size: 0.9rem;
        color: var(--text);
        opacity: 0.7;
    }

    .network-info img {
        max-height: 25px;
        width: auto;
        border-radius: 3px;
    }

    .watch-button {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px 15px;
        background-color: #e50914; /* Netflix red */
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 700;
        transition: background-color 0.2s ease, transform 0.1s ease;
        gap: 8px;
    }

    .watch-button:hover {
        background-color: #a0070e;
        transform: translateY(-2px);
    }

    .watch-button i {
        font-size: 1.1rem;
    }

    /* --- Responsive Design --- */

    @media (max-width: 1024px) {
        .movies-grid {
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        .sort-controls {
            justify-content: center;
        }
    }

    @media (max-width: 768px) {
        #utilityHeader {
            padding: 8px 15px;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        #utilityHeader .logo {
            font-size: 1.6rem;
        }
        .header-icons {
            gap: 15px;
            width: 100%;
            justify-content: center;
        }
        .header-icons i {
            font-size: 1.3rem;
        }

        #accountIcon, .main-nav {
            display: none;
        }
        #hamburgerMenu {
            display: block;
        }

        .search-subheader {
            top: 80px;
            padding: 8px 10px;
            max-width: 100%;
        }
        .search-bar-container {
            flex-direction: row;
            gap: 5px;
        }
        #searchInput {
            width: 100%;
            padding: 5px;
        }
        #suggestionsBox {
            left: 10px;
            width: calc(100% - 20px);
        }

        .main-subheader {
            flex-direction: column;
            text-align: center;
            padding: 10px 15px;
        }
        .site-tagline {
            margin-bottom: 10px;
        }

        .page-title {
            font-size: 2rem;
            margin-bottom: 25px;
        }

        .movies-grid {
            grid-template-columns: 1fr; /* Single column on small screens */
            gap: 20px;
        }
        .movie-card {
            flex-direction: row; /* Horizontal layout for single column */
            max-width: 500px; /* Limit width in single column */
            margin: 0 auto;
        }
        .movie-card-poster-container {
            width: 150px; /* Fixed width for poster in horizontal layout */
            min-width: 150px;
            padding-bottom: 0; /* Remove aspect ratio padding */
            height: 210px; /* Fixed height for poster */
            border-radius: 15px 0 0 15px;
        }
        .movie-card-poster {
            border-radius: 15px 0 0 15px;
        }
        .movie-card-details {
            padding: 15px;
        }
        .movie-card-title {
            font-size: 1.3rem;
        }
        .movie-card-meta {
            font-size: 0.85rem;
            margin-bottom: 10px;
        }
        .movie-card-description {
            font-size: 0.85rem;
            margin-bottom: 10px;
        }
        .read-more-btn {
            font-size: 0.8rem;
        }
        .movie-card-actions {
            padding-top: 10px;
        }
        .watch-button {
            padding: 8px 12px;
            font-size: 0.9rem;
        }
        .network-info {
            font-size: 0.8rem;
            margin-bottom: 5px;
        }
        .network-info img {
            max-height: 20px;
        }
    }

    @media (max-width: 480px) {
        .content-main {
            padding: 20px 10px;
        }
        .page-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
        }
        .sort-controls {
            gap: 10px;
            margin-bottom: 20px;
            flex-direction: column; /* Stack sort label and select */
            align-items: flex-end; /* Align to the right */
        }
        .movie-card {
            flex-direction: column; /* Stack back to vertical on very small screens for better readability of text */
            max-width: none;
            margin: 0;
        }
        .movie-card-poster-container {
            width: 100%;
            padding-bottom: 140%; /* Restore aspect ratio */
            height: auto;
            border-radius: 15px 15px 0 0;
        }
        .movie-card-poster {
            border-radius: 15px 15px 0 0;
        }
        .movie-card-details {
            padding: 15px;
        }
        .movie-card-title {
            font-size: 1.2rem;
        }
        .movie-card-meta {
            font-size: 0.8rem;
        }
        .movie-card-description {
            font-size: 0.8rem;
        }
        .watch-button {
            font-size: 0.85rem;
            padding: 6px 10px;
        }
        .network-info {
            font-size: 0.75rem;
        }
    }

  </style>
</head>
<body>

  <!-- Utility Header (Fixed/Sticky - contains Logo and Icons) -->
  <header id="utilityHeader">
    <div class="logo"><a href="cinewatch_home.html">CineWatch</a></div>
    <div class="header-icons">
      <i id="searchIcon" class="fas fa-search" title="Search"></i>
      <i id="addIcon" class="fas fa-plus-circle" title="Add to Watchlist"></i>
      <i id="accountIcon" class="fas fa-user-circle" title="Account"></i>
      <i id="darkModeToggle" class="fas fa-moon" title="Toggle Dark Mode"></i>
      <i id="hamburgerMenu" class="fas fa-bars" title="Menu"></i>
    </div>
  </header>

  <!-- Search Subheader (Initially hidden, slides down on search icon click) -->
  <div id="searchSubheader" class="search-subheader">
    <div class="search-bar-container">
      <input type="text" id="searchInput" placeholder="Search movies, series, genres..." autocomplete="off">
      <button id="clearSearch" class="clear-search-btn" title="Clear search"><i class="fas fa-times"></i></button>
    </div>
    <div id="suggestionsBox" class="suggestions-box">
      <!-- Search suggestions will be rendered here by JavaScript -->
    </div>
  </div>

  <!-- Account Dropdown (Hidden by default, appears on account icon click) -->
  <div id="accountDropdown" class="account-dropdown">
    <a href="login.html" id="loginLink">Login</a>
    <a href="signup.html" id="registerLink">Register</a>
    <a href="profile.html" id="profileLink" style="display:none;"><i class="fas fa-user"></i> Profile</a>
    <a href="#" id="playlistLink" class="account-item"><i class="fas fa-list-ul"></i> Playlist</a>
    <a href="#" id="bookmarksLink" class="account-item"><i class="fas fa-bookmark"></i> Bookmarks</a>
    <a href="#" id="favoritesLink" class="account-item"><i class="fas fa-heart"></i> Favorites</a>
    <a href="settings.html" id="settingsLink" class="account-item"><i class="fas fa-cog"></i> Settings</a>
    <a href="#" id="logoutLink" style="display:none;" class="account-item logout-item"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </div>

  <!-- Main Subheader (Contains Nav Links and Tagline, Scrolls with page) -->
  <div id="mainSubheader" class="main-subheader">
    <p class="site-tagline">Stream, Discover, Repeat</p>
    <nav class="main-nav">
      <ul>
        <li><a href="movies.html" class="active">Movies</a></li>
        <li><a href="tv_shows.html">TV Shows</a></li>
        <li><a href="cinema_guide.html">Cinema Guide</a></li>
        <li><a href="about_us.html">About Us</a></li>
      </ul>
    </nav>
  </div>

  <!-- Mobile Navigation Overlay (Hidden by default, appears on hamburger click) -->
  <div id="mobileNavOverlay" class="mobile-nav-overlay">
    <div class="mobile-nav-content">
      <i id="closeMobileNav" class="fas fa-times close-btn"></i>
      <a href="cinewatch_home.html">Home</a>
      <a href="movies.html" class="active">Movies</a>
      <a href="tv_shows.html">TV Shows</a>
      <a href="cinema_guide.html">Cinema Guide</a>
      <a href="about_us.html">About Us</a>
      <a href="profile.html" id="mobileProfileLink" style="display:none;"><i class="fas fa-user"></i> Profile</a>
      <a href="#" class="mobile-login-btn" id="mobileLoginLink">Login / Register</a>
      <a href="#" class="mobile-logout-btn" id="mobileLogoutLink" style="display:none;">Logout</a>
    </div>
  </div>

  <main class="content-main">
    <h1 class="page-title">All Movies</h1>

    <div class="sort-controls">
        <label for="sortOrder">Sort by:</label>
        <select id="sortOrder">
            <option value="release_desc">Release Year (Newest First)</option>
            <option value="popularity_desc">Popularity</option>
            <option value="rating_desc">Rating (Highest First)</option>
        </select>
    </div>

    <div id="moviesGrid" class="movies-grid">
        <!-- Movie cards will be dynamically loaded here -->
    </div>
  </main>

 <!-- Site Footer (Unified Structure) -->
  <footer class="site-footer">
      <div class="footer-content">
          <div class="footer-section about">
              <h3>CineWatch</h3>
              <p>Your ultimate destination for movies and TV shows.</p>
          </div>
          <div class="footer-section quick-links">
              <h3>Quick Links</h3>
              <ul>
                  <li><a href="cinewatch_home.html">Home</a></li>
                  <li><a href="movies.html">Movies</a></li>
                  <li><a href="tv_shows.html">TV Shows</a></li>
                  <li><a href="cinema_guide.html">Cinema Guide</a></li>
              </ul>
          </div>
          <div class="footer-section developer-info">
              <h3>Developer</h3>
              <ul>
                  <li><a href="developer.html">About Alex Malunda</a></li>
                  <li><a href="https://github.com/Asleki" target="_blank" rel="noopener noreferrer">My GitHub</a></li>
              </ul>
          </div>
          <div class="footer-section legal-links">
              <h3>Legal</h3>
              <ul>
                  <li><a href="privacy_policy.html">Privacy Policy</a></li>
                  <li><a href="termsof_services.html">Terms of Service</a></li>
                  <li><a href="copyright_information.html">Copyright Information</a></li>
                  <li><a href="faqs.html">FAQs</a></li>
                  <li><a href="contact_us.html">Contact Us</a></li>
              </ul>
          </div>
          <div class="footer-section contact-social">
              <h3>Connect With Me</h3>
              <p>Email: <a href="mailto:alexmalunda@aol.com">alexmalunda@aol.com</a></p>
              <p>Last Modified: <span id="last-modified"></span></p>
              <div class="social-icons">
                <a href="https://www.instagram.com/yourprofile" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                      <img src="images/icons&logos/instagram_24dp.svg" alt="Instagram" onerror="this.onerror=null;this.src='https://placehold.co/30x30/000080/FFFFFF?text=Insta';">
                  </a>
                <a href="https://www.facebook.com/aslekiymastamynd" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                    <img src="images/icons&logos/facebook_24dp.svg" alt="Facebook" onerror="this.onerror=null;this.src='https://placehold.co/30x30/000080/FFFFFF?text=FB';">
                </a>
                <a href="https://www.linkedin.com/in/alexmalunda" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                    <img src="images/icons&logos/linkedin_24dp.svg" alt="LinkedIn" onerror="this.onerror=null;this.src='https://placehold.co/30x30/000080/FFFFFF?text=LI';">
                </a>
                <a href="https://x.com/yourhandle" target="_blank" rel="noopener noreferrer" aria-label="X (formerly Twitter)">
                    <img src="images/icons&logos/twitter_24dp.svg" alt="X (formerly Twitter)" onerror="this.onerror=null;this.src='https://placehold.co/30x30/000080/FFFFFF?text=X';">
                </a>
              </div>
          </div>
      </div>
  </footer>

  <!-- Custom Alert/Message Box (controlled by showMessageBox function in JS) -->
  <div id="customAlert" class="custom-alert-overlay">
    <div class="alert-content">
        <i class="fas fa-info-circle alert-icon blue-icon"></i>
        <p id="alertMessage">This is a custom message.</p>
        <button id="closeAlertBtn" class="close-alert-btn">OK</button>
    </div>
  </div>

  <!-- Consolidated JavaScript -->
  <script>
    /*
     * File: movies.html (Consolidated JavaScript)
     * Description: Handles movie listing, filtering, sorting, card rendering,
     * "Read More/Less" functionality, and maintains consistent header/footer functionality.
     */

    // --- Data Definitions (Consolidated and updated with 'type' and 'popularityScore') ---

    // Data for hero slides (not directly used on movies.html, but kept for consistency)
    const heroSlides = [
        { backdrop: 'images/herobackdrops/allofusaredeadbackdrop.webp', poster: 'images/heroposters/allofusaredeadheroposter.webp', quote: 'We’re trapped, surrounded by dead things… and by dead people.', },
        { backdrop: 'images/herobackdrops/breakingbadbackdrop.webp', poster: 'images/heroposters/breakingbadheroposter.webp', quote: 'I am the one who knocks!', },
        { backdrop: 'images/herobackdrops/extractionbackdrop.webp', poster: 'images/heroposters/extractionheroposter.webp', quote: 'You send a boy to do a man\'s job.', },
        { backdrop: 'images/herobackdrops/moneyheistbackdrop.webp', poster: 'images/heroposters/moneyheistheroposter.webp', quote: 'The police are just like us. They\'re just doing their job.', },
        { backdrop: 'images/herobackdrops/prisonbreakbackdrop.webp', poster: 'images/heroposters/prisonbreakheroposter.webp', quote: 'Get yourself a plan and stick to it.', },
        { backdrop: 'images/herobackdrops/theboysbackdrop.webp', poster: 'images/heroposters/theboysheroposter.webp', quote: 'Supes are everywhere. You gotta be careful.', },
        { backdrop: 'images/herobackdrops/thelastofusbackdrop.webp', poster: 'images/heroposters/thelastofusheroposter.webp', quote: 'You keep finding something to fight for.', },
        { backdrop: 'images/herobackdrops/wednesdaybackdrop.webp', poster: 'images/heroposters/wednesdayheroposter.webp', quote: 'I act as if I do not care, but deep down... I actually do not care.', },
    ];

    // Placeholder for user login status (controlled by account dropdown logic)
    let userLoggedIn = false; // Default to false

    // Consolidated Show Data (with 'type' and 'popularityScore' added)
    const showsData = [
        {
            id: 'breakingbad', type: 'series', title: 'Breaking Bad', popularityScore: 95,
            poster: 'images/showposters/breakingbadposter.webp',
            genre: ['Drama', 'Crime', 'Thriller'], year: 2008, rating: 9.5,
            description: 'A high school chemistry teacher diagnosed with lung cancer turns to manufacturing and selling methamphetamine in order to secure his family\'s future.',
            isFeatured: true, cast: [], awards: ["Golden Globe Award for Best Television Series – Drama", "Primetime Emmy Award for Outstanding Drama Series (x2)"],
            network: "AMC", networkLogo: "images/icons&logos/amclogo.svg"
        },
        {
            id: 'moneyheist', type: 'series', title: 'Money Heist', popularityScore: 90,
            poster: 'images/showposters/moneyheistposter.webp',
            genre: ['Crime', 'Drama', 'Thriller'], year: 2017, rating: 8.3,
            description: 'A mysterious man, "The Professor", recruits a band of eight robbers who take hostages and lock themselves in the Royal Mint of Spain as part of his elaborate plan to execute the biggest heist in history.',
            isFeatured: true, cast: [], awards: ["International Emmy Award for Best Drama Series"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'strangerthings', type: 'series', title: 'Stranger Things', popularityScore: 92,
            poster: 'images/showposters/strangerthingsposter.webp',
            genre: ['Sci-Fi', 'Horror', 'Drama', 'Fantasy'], year: 2016, rating: 8.7,
            description: 'When a young boy vanishes, a small town uncovers a mystery involving secret experiments, terrifying supernatural forces, and one strange little girl.',
            isFeatured: false, cast: [], awards: ["Screen Actors Guild Award for Outstanding Performance by an Ensemble in a Drama Series"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'theboys', type: 'series', title: 'The Boys', popularityScore: 88,
            poster: 'images/showposters/theboysposter.webp',
            genre: ['Action', 'Comedy', 'Drama', 'Sci-Fi'], year: 2019, rating: 8.7,
            description: 'A group of vigilantes known informally as "The Boys" set out to take down corrupt superheroes with no more than blue-collar grit and a willingness to fight dirty.',
            isFeatured: true, cast: [], awards: ["Critics' Choice Super Award for Best Superhero Series"],
            network: "Amazon Prime Video", networkLogo: "images/icons&logos/amazonprimevideo.svg"
        },
        {
            id: 'wednesday', type: 'series', title: 'Wednesday', popularityScore: 85,
            poster: 'images/showposters/wednesdayposter.webp',
            genre: ['Comedy', 'Crime', 'Fantasy'], year: 2022, rating: 8.2,
            description: 'Wednesday Addams investigates a monstrous mystery at the school she attends.',
            isFeatured: false, cast: [], awards: ["Hollywood Critics Association TV Award for Best Actress in a Streaming Series, Comedy (Jenna Ortega)"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'thecrown', type: 'series', title: 'The Crown', popularityScore: 78,
            poster: 'images/showposters/thecrownposter.webp',
            genre: ['Drama', 'History', 'Biography'], year: 2016, rating: 8.7,
            description: 'Follows the political rivalries and romance of Queen Elizabeth II\'s reign and the events that shaped the second half of the 20th century.',
            isFeatured: false, cast: [], awards: ["Golden Globe Award for Best Television Series – Drama (x2)", "Primetime Emmy Award for Outstanding Drama Series (x2)"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'thequeensgambit', type: 'series', title: 'The Queen\'s Gambit', popularityScore: 80,
            poster: 'images/showposters/thequeensgambitposter.webp',
            genre: ['Drama'], year: 2020, rating: 8.6,
            description: 'Orphaned at nine, prodigious chess prodigy Beth Harmon struggles with addiction in a quest to become the greatest chess player in the world.',
            isFeatured: false, cast: [], awards: ["Golden Globe Award for Best Television Limited Series, Anthology Series, or Motion Picture Made for Television", "Primetime Emmy Award for Outstanding Limited or Anthology Series"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'allofusaredead', type: 'series', title: 'All of Us Are Dead', popularityScore: 82,
            poster: 'images/showposters/allofusaredeadposter.webp',
            genre: ['Action', 'Drama', 'Fantasy', 'Horror'], year: 2022, rating: 7.5,
            description: 'A high school becomes ground zero for a zombie virus outbreak. Trapped students must fight their way out or turn into one of the infected.',
            isFeatured: true, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'squidgame', type: 'series', title: 'Squid Game', popularityScore: 98,
            poster: 'images/showposters/squidgameposter.webp',
            genre: ['Action', 'Drama', 'Mystery', 'Thriller'], year: 2021, rating: 8.0,
            description: 'Hundreds of cash-strapped players accept a strange invitation to compete in children\'s games. Inside, a tempting prize awaits with deadly high stakes.',
            isFeatured: false, cast: [], awards: ["Primetime Emmy Award for Outstanding Lead Actor in a Drama Series (Lee Jung-jae)", "Screen Actors Guild Award for Outstanding Performance by a Male Actor in a Drama Series (Lee Jung-jae)"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'thelastofus', type: 'series', title: 'The Last of Us', popularityScore: 93,
            poster: 'images/showposters/thelastofusposter.webp',
            genre: ['Action', 'Adventure', 'Drama', 'Sci-Fi'], year: 2023, rating: 8.8,
            description: 'After a global pandemic destroys civilization, a hardened survivor takes charge of a 14-year-old girl who may be humanity\'s last hope.',
            isFeatured: true, cast: [], awards: ["N/A"],
            network: "HBO", networkLogo: "images/icons&logos/hbo.svg"
        },
        {
            id: 'thewitcher', type: 'series', title: 'The Witcher', popularityScore: 84,
            poster: 'images/showposters/thewitcherposter.webp',
            genre: ['Action', 'Adventure', 'Drama', 'Fantasy'], year: 2019, rating: 8.2,
            description: 'Geralt of Rivia, a mutated monster-hunter for hire, journeys toward his destiny in a turbulent world where people often prove more wicked than beasts.',
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'arcane', type: 'series', title: 'Arcane', popularityScore: 89,
            poster: 'images/showposters/arcaneposter.webp',
            genre: ['Animation', 'Action', 'Adventure', 'Fantasy'], year: 2021, rating: 9.0,
            description: 'Set in utopian Piltover and the oppressed underground of Zaun, the story follows the origins of two iconic League of Legends champions and the power that will tear them apart.',
            isFeatured: false, cast: [], awards: ["Primetime Emmy Award for Outstanding Animated Program"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'peakyblinders', type: 'series', title: 'Peaky Blinders', popularityScore: 86,
            poster: 'images/showposters/peakyblindersposter.webp',
            genre: ['Crime', 'Drama'], year: 2013, rating: 8.8,
            description: 'A gangster family epic set in Birmingham, England in 1919, centering on a gang who sew razor blades in the peaks of their caps, and their ferocious boss Tommy Shelby.',
            isFeatured: false, cast: [], awards: ["British Academy Television Award for Best Drama Series"],
            network: "BBC Two", networkLogo: "images/icons&logos/bbctwo.svg"
        },
        {
            id: 'dark', type: 'series', title: 'Dark', popularityScore: 83,
            poster: 'images/showposters/darkposter.webp',
            genre: ['Crime', 'Drama', 'Mystery', 'Sci-Fi'], year: 2017, rating: 8.7,
            description: 'A family saga with a supernatural twist, set in a German town, where the disappearance of two young children exposes the double lives and fractured relationships among four families.',
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'theoffice_us', type: 'series', title: 'The Office (US)', popularityScore: 87,
            poster: 'images/showposters/theofficeposter.webp',
            genre: ['Comedy'], year: 2005, rating: 9.0,
            description: 'A mockumentary on the everyday lives of a group of office employees in the Scranton, Pennsylvania, branch of the fictional Dunder Mifflin Paper Company.',
            isFeatured: false, cast: [], awards: ["Primetime Emmy Award for Outstanding Comedy Series"],
            network: "NBC", networkLogo: "images/icons&logos/nbclogo.svg"
        },
        {
            id: 'friends', type: 'series', title: 'Friends', popularityScore: 89,
            poster: 'images/showposters/friendsposter.webp',
            genre: ['Comedy', 'Romance'], year: 1994, rating: 8.9,
            description: 'Follows the personal and professional lives of six twenty-somethings living in Manhattan.',
            isFeatured: false, cast: [], awards: ["Primetime Emmy Award for Outstanding Comedy Series"],
            network: "NBC", networkLogo: "images/icons&logos/nbclogo.svg"
        },
        {
            id: 'gameofthrones', type: 'series', title: 'Game of Thrones', popularityScore: 97,
            poster: 'images/showposters/gameofthronesposter.webp',
            genre: ['Action', 'Adventure', 'Drama', 'Fantasy'], year: 2011, rating: 9.3,
            description: 'Nine noble families fight for control over the mythical lands of Westeros, while an ancient enemy returns after being dormant for thousands of years.',
            isFeatured: false, cast: [], awards: ["Primetime Emmy Award for Outstanding Drama Series (x4)", "Golden Globe Award for Best Television Series – Drama"],
            network: "HBO", networkLogo: "images/icons&logos/hbo.svg"
        },
        {
            id: 'thewalkingdead', type: 'series', title: 'The Walking Dead', popularityScore: 79,
            poster: 'images/showposters/thewalkingdeadposter.webp',
            genre: ['Drama', 'Horror', 'Sci-Fi', 'Thriller'], year: 2010, rating: 8.1,
            description: 'Sheriff Deputy Rick Grimes wakes up from a coma to learn the world is in ruins and must lead a group of survivors to stay alive.',
            isFeatured: true, cast: [], awards: ["Saturn Award for Best Horror Television Series"],
            network: "AMC", networkLogo: "images/icons&logos/amclogo.svg"
        },
        {
            id: 'chernobyl', type: 'series', title: 'Chernobyl', popularityScore: 91,
            poster: 'images/showposters/chernobylposter.webp',
            genre: ['Drama', 'History', 'Thriller'], year: 2019, rating: 9.4,
            description: 'In April 1986, an explosion at the Chernobyl nuclear power plant in the Ukrainian SSR becomes one of the world\'s worst man-made catastrophes.',
            isFeatured: false, cast: [], awards: ["Golden Globe Award for Best Television Limited Series, Anthology Series, or Motion Picture Made for Television", "Primetime Emmy Award for Outstanding Limited or Anthology Series"],
            network: "HBO", networkLogo: "images/icons&logos/hbo.svg"
        },
        {
            id: "prisonbreak_series", type: 'series', title: "Prison Break", popularityScore: 86,
            poster: "images/showposters/prisonbreakposter1.webp",
            genre: ["Action", "Hollywood", "Crime", "Drama", "Thriller"], year: 2005, rating: 8.3,
            description: "When his brother, Lincoln Burrows, is wrongly sentenced to death, a structural engineer, Michael Scofield, devises an elaborate plan to break him out of prison—starting by getting incarcerated himself. A thrilling ride full of twists, tension, and brotherly loyalty as they navigate their escape and evade authorities.",
            isFeatured: true, cast: [], awards: ["N/A"],
            network: "Fox", networkLogo: "images/icons&logos/foxlogo.svg"
        },
        {
            id: "yourhonor_series", type: 'series', title: "Your Honor", popularityScore: 75,
            poster: "images/showposters/yourhonorposter1.webp",
            genre: ["Hollywood", "Coming Soon", "Crime", "Drama", "Thriller"], year: 2024, rating: "Expected",
            description: "A respected New Orleans judge's life is turned upside down when his teenage son is involved in a hit-and-run, leading to a high-stakes game of lies, deceit, and impossible choices to protect his family. Season 3 is highly anticipated.",
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Showtime", networkLogo: "images/icons&logos/showtime.svg"
        },
        {
            id: "ghoul_series", type: 'series', title: "Ghoul", popularityScore: 65,
            poster: "images/showposters/ghoulposter1.webp",
            genre: ["Bollywood", "Horror", "Thriller"], year: 2018, rating: 7.1,
            description: "A newly appointed interrogator arrives at a remote military detention center to question a dangerous terrorist, only to discover that the detainee is not what he seems and harbors a terrifying supernatural entity.",
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: "crimeandjustice_series", type: 'series', title: "Crime and Justice", popularityScore: 70,
            poster: "images/showposters/crimeandjusticeposter1.webp",
            genre: ["Kenyan Drama", "Trending", "Coming Soon", "Crime", "Drama", "Legal"], year: 2021, rating: 7.0,
            description: "A Kenyan police procedural series that follows two detectives as they investigate various crimes in Nairobi. The show delves into the dark side of the city, exploring themes of corruption, greed, and the pursuit of justice.",
            isFeatured: true, cast: [], awards: ["N/A"],
            network: "Showmax", networkLogo: "images/icons&logos/showmaxlogo.svg"
        },
        {
            id: "dayofthejackal_series", type: 'series', title: "The Day Of The Jackal", popularityScore: 68,
            poster: "images/showposters/thedayofthejackalposter1.webp",
            genre: ["International", "Coming Soon", "Thriller"], year: 2024, rating: "Expected",
            description: "An upcoming modern-day reimagining of the iconic novel and film, following a professional assassin known as 'The Jackal' as he undertakes a mission to assassinate a high-profile target.",
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Peacock", networkLogo: "images/icons&logos/peacocklogo.svg"
        },
        {
            id: "secondwife_series", type: 'series', title: "Second Wife", popularityScore: 60,
            poster: "images/showposters/secondfamilyposter1.webp",
            genre: ["Kenyan Drama", "Coming Soon", "Drama"], year: "TBA", rating: "Expected",
            description: "Details for 'Second Wife' are scarce, but it's expected to be a compelling Kenyan drama exploring familial and marital complexities, possibly revolving around the theme of polygamy or a new spouse in a family.",
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Maisha Magic Plus", networkLogo: "images/icons&logos/MaishaMagicPlus.svg"
        },
        {
            id: "kingdom_series", type: 'series', title: "Kingdom", popularityScore: 77,
            poster: "images/showposters/kingdomposter1.webp",
            genre: ["K-Drama", "Action", "Horror", "Thriller"], year: 2019, rating: 8.3,
            description: "While strange rumors about their ill King grip a kingdom, the crown prince becomes their only hope against a mysterious plague that is turning people into zombies.",
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: "thegoodplace", type: 'series', title: "The Good Place", popularityScore: 74,
            poster: "images/showposters/thegoodplaceposter.webp",
            genre: ['Comedy', 'Fantasy', 'Drama'], year: 2016, rating: 8.2,
            description: 'Four people and their otherworldly architect struggle in the afterlife to define what it means to be good.',
            isFeatured: false, cast: [], awards: ["Peabody Award"],
            network: "NBC", networkLogo: "images/icons&logos/nbclogo.svg"
        },
        {
            id: "mandolorian", type: 'series', title: "The Mandalorian", popularityScore: 89,
            poster: "images/showposters/mandolorianposter.webp",
            genre: ['Sci-Fi', 'Action', 'Adventure'], year: 2019, rating: 8.7,
            description: 'The travels of a lone bounty hunter in the outer reaches of the galaxy, far from the authority of the New Republic.',
            isFeatured: true, cast: [], awards: ["Primetime Emmy Award for Outstanding Drama Series (Nomination)", "MTV Movie & TV Award for Best Duo (Pedro Pascal & Grogu)"],
            network: "Disney+", networkLogo: "images/icons&logos/disneypluslogo.svg"
        },
        {
            id: "severance", type: 'series', title: "Severance", popularityScore: 76,
            poster: "images/showposters/severanceposter.webp",
            genre: ['Sci-Fi', 'Drama', 'Thriller'], year: 2022, rating: 8.7,
            description: 'A team of employees whose memories have been surgically divided between their work and personal lives discover the true nature of their jobs.',
            isFeatured: false, cast: [], awards: ["Primetime Emmy Award for Outstanding Drama Series (Nomination)"],
            network: "Apple TV+", networkLogo: "images/icons&logos/appletvplus.svg"
        },
        {
            id: "tedlasso", type: 'series', title: "Ted Lasso", popularityScore: 85,
            poster: "images/showposters/tedlassoposter.webp",
            genre: ['Comedy', 'Sport'], year: 2020, rating: 8.8,
            description: 'American football coach Ted Lasso is hired to manage a British soccer team, despite having no experience coaching soccer.',
            isFeatured: true, cast: [], awards: ["Primetime Emmy Award for Outstanding Comedy Series (x2)", "Golden Globe Award for Best Television Series – Musical or Comedy"],
            network: "Apple TV+", networkLogo: "images/icons&logos/appletvplus.svg"
        },
        {
            id: "fleabag", type: 'series', title: "Fleabag", popularityScore: 72,
            poster: "images/showposters/fleabagposter.webp",
            genre: ['Comedy', 'Drama'], year: 2016, rating: 8.7,
            description: 'A cynical woman navigates modern life in London while dealing with tragedy.',
            isFeatured: false, cast: [], awards: ["Primetime Emmy Award for Outstanding Comedy Series", "Golden Globe Award for Best Television Series – Musical or Comedy"],
            network: "BBC Three", networkLogo: "images/icons&logos/bbcthree.svg"
        },
        {
            id: "narcos", type: 'series', title: "Narcos", popularityScore: 81,
            poster: "images/showposters/narcosposter.webp",
            genre: ['Biography', 'Crime', 'Drama'], year: 2015, rating: 8.8,
            description: 'A chronicled look at the criminal exploits of Colombian drug lord Pablo Escobar, as well as the many other drug kingpins who plagued the country through the years.',
            isFeatured: true, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: "theboys_presents_diabolical", type: 'series', title: "The Boys Presents: Diabolical", popularityScore: 67,
            poster: "images/showposters/theboysdiabolicalposter.webp",
            genre: ['Animation', 'Action', 'Comedy'], year: 2022, rating: 7.3,
            description: 'An animated anthology series set in the universe of The Boys.',
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Amazon Prime Video", networkLogo: "images/icons&logos/amazonprimevideo.svg"
        },
        {
            id: "houseofthedragon", type: 'series', title: "House of the Dragon", popularityScore: 90,
            poster: "images/showposters/houseofthedragonposter.webp",
            genre: ['Action', 'Adventure', 'Drama', 'Fantasy'], year: 2022, rating: 8.5,
            description: 'The story of the Targaryen civil war that took place about 200 years before the events of Game of Thrones.',
            isFeatured: true, cast: [], awards: ["Golden Globe Award for Best Television Series – Drama"],
            network: "HBO", networkLogo: "images/icons&logos/hbo.svg"
        },
        {
            id: "winningtime", type: 'series', title: "Winning Time: The Rise of the Lakers Dynasty", popularityScore: 69,
            poster: "images/showposters/winningtimeposter.webp",
            genre: ['Biography', 'Drama', 'Sport'], year: 2022, rating: 8.2,
            description: 'A fast-break series about the professional and personal lives of the 1980s Los Angeles Lakers basketball team, one of sports\' most revered and dominant dynasties -- a team that defined an era, both on and off the court.',
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "HBO", networkLogo: "images/icons&logos/hbo.svg"
        },
        {
            id: 'moneyheist_kdrama', type: 'series', title: 'Money Heist (K-Drama)', popularityScore: 73,
            poster: 'images/showposters/moneyheistkoreaposter1.webp',
            genre: ['K-Drama', 'Crime', 'Drama', 'Thriller'], year: 2022, rating: 7.0,
            description: 'Thieves seize the Mint of Korea. With hostages trapped inside, the police must stop the crew — and the shadowy mastermind behind it all.',
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: 'lupin', type: 'series', title: 'Lupin', popularityScore: 78,
            poster: 'images/showposters/lupinposter.webp',
            genre: ['Crime', 'Drama', 'Mystery'], year: 2021, rating: 7.5,
            description: 'Inspired by the adventures of Arsène Lupin, gentleman thief Assane Diop sets out to avenge his father for an injustice inflicted by a wealthy family.',
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        // --- Movies ---
        {
            id: 'extraction', type: 'movie', title: 'Extraction', popularityScore: 80,
            poster: 'images/showposters/extractionposter2.webp',
            genre: ['Action', 'Thriller'], year: 2020, rating: 6.7,
            description: 'A black-market mercenary who has nothing to lose is hired to rescue the kidnapped son of an imprisoned international crime lord.',
            isFeatured: true, cast: [], awards: ["N/A"],
            network: "Netflix", networkLogo: "images/icons&logos/netflixlogo.svg"
        },
        {
            id: "inception_movie", type: 'movie', title: "Inception", popularityScore: 94,
            poster: "images/showposters/inceptioposter1.webp",
            genre: ["Hollywood", "Action", "Sci-Fi", "Thriller"], year: 2010, rating: 8.8,
            description: "A thief who steals corporate secrets through use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O., but his tragic past may doom the mission and his team to disaster.",
            isFeatured: false, cast: [], awards: ["Academy Award for Best Cinematography", "Academy Award for Best Sound Editing", "Academy Award for Best Sound Mixing", "Academy Award for Best Visual Effects"],
            network: "Warner Bros. Pictures", networkLogo: "images/icons&logos/warnerbros.svg"
        },
        {
            id: "3idiots_movie", type: 'movie', title: "3 Idiots", popularityScore: 85,
            poster: "images/showposters/3idiotsposter1.webp",
            genre: ["Bollywood", "Comedy", "Drama", "Romance"], year: 2009, rating: 8.4,
            description: "Two friends embark on a quest for a third, long-lost friend, while reminiscing about their college days and the profound impact their eccentric, brilliant buddy had on their lives and perspectives on education and success.",
            isFeatured: false, cast: [], awards: ["Filmfare Award for Best Film", "National Film Award for Best Popular Film Providing Wholesome Entertainment"],
            network: "Vinod Chopra Films", networkLogo: "images/icons&logos/filmstudio.svg"
        },
        {
            id: "dangal_movie", type: 'movie', title: "Dangal", popularityScore: 88,
            poster: "images/showposters/dangalposter1.webp",
            genre: ["Bollywood", "Biography", "Drama", "Sport"], year: 2016, rating: 8.3,
            description: "Based on the true story of Mahavir Singh Phogat, a former wrestler who trains his daughters Geeta Phogat and Babita Kumari to become world-class female wrestlers, challenging societal norms and achieving international success.",
            isFeatured: false, cast: [], awards: ["Filmfare Award for Best Film", "National Film Award for Best Popular Film Providing Wholesome Entertainment"],
            network: "Walt Disney Studios", networkLogo: "images/icons&logos/disneylogo.svg"
        },
        {
            id: "nairobihalflife_movie", type: 'movie', title: "Nairobi Half Life", popularityScore: 75,
            poster: "images/showposters/nairobihalflifeposter1.webp",
            genre: ["Kenyan Drama", "Crime", "Drama"], year: 2012, rating: 7.8,
            description: "Nairobi Half Life tells the story of Mwas, an aspiring actor from a rural town who travels to Nairobi to pursue his dreams. Faced with harsh city life, he’s pulled into a world of crime and must struggle to stay true to his dreams while surviving the city’s brutal realities. It's a powerful and gritty portrayal of urban life in Kenya.",
            isFeatured: false, cast: [], awards: ["Best Feature Film at the 33rd Durban International Film Festival"],
            network: "Ginger Ink Films", networkLogo: "images/icons&logos/GingerInkFilms.svg"
        },
        {
            id: "traintobusan_movie", type: 'movie', title: "Train To Busan", popularityScore: 79,
            poster: "images/showposters/traintobusanposter1.webp",
            genre: ["K-Drama", "Action", "Horror", "Thriller"], year: 2016, rating: 7.6,
            description: "While a zombie apocalypse breaks out in South Korea, a father and daughter, along with other passengers, are trapped on a high-speed train fighting for their lives as the infection spreads rapidly.",
            isFeatured: false, cast: [], awards: ["Blue Dragon Film Award for Best New Director (Yeon Sang-ho)"],
            network: "Next Entertainment World", networkLogo: "images/icons&logos/NextEntertainmentWorld.svg"
        },
        {
            id: "40sticks_movie", type: 'movie', title: "40 Sticks", popularityScore: 65,
            poster: "images/showposters/40sticksposter1.webp",
            genre: ["Kenyan Drama", "Action", "Crime", "Thriller"], year: 2020, rating: 6.2,
            description: "When a prison bus crashes in the middle of a forest, a group of convicts must work together to survive the harsh wilderness while evading an unknown, deadly threat lurking in the shadows.",
            isFeatured: false, cast: [], awards: ["N/A"],
            network: "Netflix (Kenya)", networkLogo: "images/icons&logos/netflixlogo.svg"
        }
    ];

    // --- Utility Functions (Copied from main.js and standalone_header.js consolidated) ---

    /**
     * Displays a custom alert/message box to the user.
     * @param {string} message - The message to display.
     * @param {string} iconClasses - Font Awesome classes for the icon (e.g., "fas fa-check-circle green-icon").
     */
    function showMessageBox(message, iconClasses = "fas fa-info-circle blue-icon") {
        const customAlert = document.getElementById('customAlert');
        const alertMessage = document.getElementById('alertMessage');
        const alertIcon = customAlert.querySelector('.alert-icon');
        const closeAlertBtn = document.getElementById('closeAlertBtn');

        if (customAlert && alertMessage && alertIcon && closeAlertBtn) {
            alertMessage.textContent = message;
            alertIcon.className = 'alert-icon ' + iconClasses;
            customAlert.classList.add('show');

            const closeHandler = () => {
                customAlert.classList.remove('show');
                closeAlertBtn.removeEventListener('click', closeHandler);
            };
            closeAlertBtn.addEventListener('click', closeHandler);

            const overlayClickHandler = (event) => {
                if (event.target === customAlert) {
                    customAlert.classList.remove('show');
                    customAlert.removeEventListener('click', overlayClickHandler);
                }
            };
            customAlert.addEventListener('click', overlayClickHandler);
        } else {
            console.error("MessageBox elements not found. Cannot show message.");
        }
    }

    /**
     * Toggles dark mode on/off.
     */
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const darkModeToggle = document.getElementById('darkModeToggle');
        if (darkModeToggle) {
            if (document.body.classList.contains('dark-mode')) {
                darkModeToggle.classList.replace('fa-moon', 'fa-sun');
                darkModeToggle.setAttribute('title', 'Toggle Light Mode');
            } else {
                darkModeToggle.classList.replace('fa-sun', 'fa-moon');
                darkModeToggle.setAttribute('title', 'Toggle Dark Mode');
            }
            // Store preference in local storage
            localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        }
    }

    /**
     * Updates the visibility of login/logout/profile links in the account dropdown.
     * @param {boolean} isLoggedIn - True if the user is logged in, false otherwise.
     */
    function updateAccountDropdown(isLoggedIn) {
        const loginLink = document.getElementById('loginLink');
        const registerLink = document.getElementById('registerLink');
        const profileLink = document.getElementById('profileLink');
        const logoutLink = document.getElementById('logoutLink');
        const mobileLoginLink = document.getElementById('mobileLoginLink');
        const mobileLogoutLink = document.getElementById('mobileLogoutLink');
        const mobileProfileLink = document.getElementById('mobileProfileLink');

        const accountItems = document.querySelectorAll('.account-item');

        if (isLoggedIn) {
            if (loginLink) loginLink.style.display = 'none';
            if (registerLink) registerLink.style.display = 'none';
            if (profileLink) profileLink.style.display = 'flex';
            if (logoutLink) logoutLink.style.display = 'flex';
            if (mobileLoginLink) mobileLoginLink.style.display = 'none';
            if (mobileLogoutLink) mobileLogoutLink.style.display = 'flex';
            if (mobileProfileLink) mobileProfileLink.style.display = 'flex';

            accountItems.forEach(item => {
                if (item.id !== 'loginLink' && item.id !== 'registerLink' && item.id !== 'logoutLink' && item.id !== 'profileLink') {
                    item.style.display = 'flex';
                }
            });

        } else {
            if (loginLink) loginLink.style.display = 'flex';
            if (registerLink) registerLink.style.display = 'flex';
            if (profileLink) profileLink.style.display = 'none';
            if (logoutLink) logoutLink.style.display = 'none';
            if (mobileLoginLink) mobileLoginLink.style.display = 'flex';
            if (mobileLogoutLink) mobileLogoutLink.style.display = 'none';
            if (mobileProfileLink) mobileProfileLink.style.display = 'none';

            accountItems.forEach(item => {
                if (item.id !== 'loginLink' && item.id !== 'registerLink' && item.id !== 'logoutLink' && item.id !== 'profileLink') {
                    item.style.display = 'none';
                }
            });
        }
        userLoggedIn = isLoggedIn;
    }

    /**
     * Generates an array of unique values for a specified key from a dataset.
     * Used for populating search suggestions (e.g., unique genres, titles).
     * @param {Array<Object>} data - The dataset (e.g., showsData).
     * @param {string} key - The key to extract unique values from (e.g., 'genre', 'title').
     * @returns {Array<string>} An array of unique string values, sorted alphabetically.
     */
    function getUniqueValues(data, key) {
        if (!data || !Array.isArray(data)) return [];
        const unique = new Set();
        data.forEach(item => {
            if (item[key]) {
                if (Array.isArray(item[key])) {
                    item[key].forEach(subItem => unique.add(subItem.trim()));
                } else {
                    unique.add(item[key].trim());
                }
            }
        });
        return Array.from(unique).sort();
    }

    /**
     * Renders primary search suggestions (e.g., top genres or keywords).
     * @param {HTMLElement} container - The DOM element to render suggestions into.
     */
    function showPrimarySuggestions(container) {
        container.innerHTML = '';
        const suggestions = ['Action', 'Comedy', 'Drama', 'Sci-Fi', 'Thriller', 'Animation'];
        suggestions.forEach(s => {
            const div = document.createElement('div');
            div.classList.add('suggestion-item', 'primary-suggestion');
            div.textContent = s;
            div.addEventListener('click', () => {
                document.getElementById('searchInput').value = s;
                showMessageBox(`Searching for category: ${s}`);
                container.innerHTML = '';
            });
            container.appendChild(div);
        });
        container.classList.add('visible');
    }

    /**
     * Renders show title suggestions based on user input.
     * @param {HTMLElement} container - The DOM element to render suggestions into.
     * @param {string[]} titles - An array of matching show titles.
     */
    function renderShowTitleSuggestions(container, titles) {
        container.innerHTML = '';
        if (titles.length === 0) {
            container.classList.remove('visible');
            return;
        }
        titles.slice(0, 10).forEach(title => {
            const div = document.createElement('div');
            div.classList.add('suggestion-item');
            div.textContent = title;
            div.addEventListener('click', () => {
                document.getElementById('searchInput').value = title;
                showMessageBox(`Searching for show: ${title}`);
                container.innerHTML = '';
            });
            container.appendChild(div);
        });
        container.classList.add('visible');
    }

    // --- Movies Page Specific Functions ---

    /**
     * Renders movie cards into the grid.
     * @param {Array<Object>} movies - An array of movie objects to render.
     */
    function renderMovies(movies) {
        const moviesGrid = document.getElementById('moviesGrid');
        moviesGrid.innerHTML = ''; // Clear existing content

        movies.forEach(movie => {
            const isExpected = movie.rating === "Expected";
            const watchButtonText = isExpected ? "Watch Trailer" : "Watch Now";
            const watchIcon = isExpected ? "fas fa-film" : "fas fa-play";
            const watchLink = isExpected ? `watch_now.html?title=${encodeURIComponent(movie.title)}&trailer=true` : `watch_now.html?title=${encodeURIComponent(movie.title)}`;

            const cardHtml = `
                <div class="movie-card" data-id="${movie.id}">
                    <div class="movie-card-poster-container">
                        <img src="${movie.poster}" alt="${movie.title} Poster" class="movie-card-poster" onerror="this.onerror=null;this.src='https://placehold.co/300x420/333/fff?text=No+Poster';">
                    </div>
                    <div class="movie-card-details">
                        <h3 class="movie-card-title">${movie.title}</h3>
                        <div class="movie-card-meta">
                            <span>${Array.isArray(movie.genre) ? movie.genre.join(', ') : movie.genre}</span>
                            <span>${movie.year}</span>
                            <span>${movie.rating !== "Expected" ? `<i class="fas fa-star"></i> ${movie.rating}` : movie.rating}</span>
                        </div>
                        <p class="movie-card-description description-collapsed">${movie.description}</p>
                        <button class="read-more-btn">Read More</button>
                        <div class="movie-card-actions">
                            <div class="network-info">
                                <img src="${movie.networkLogo || 'https://placehold.co/25x25/666/fff?text=N'}" alt="${movie.network || 'Network'} Logo" onerror="this.onerror=null;this.src='https://placehold.co/25x25/666/fff?text=N';">
                                <span>${movie.network || 'Unknown Network'}</span>
                            </div>
                            <a href="${watchLink}" class="watch-button">
                                <i class="${watchIcon}"></i> ${watchButtonText}
                            </a>
                        </div>
                    </div>
                </div>
            `;
            moviesGrid.insertAdjacentHTML('beforeend', cardHtml);
        });

        // Attach Read More/Less event listeners
        document.querySelectorAll('.read-more-btn').forEach(button => {
            button.addEventListener('click', (event) => {
                const description = event.target.previousElementSibling; // The <p> element
                description.classList.toggle('description-collapsed');
                if (description.classList.contains('description-collapsed')) {
                    event.target.textContent = 'Read More';
                } else {
                    event.target.textContent = 'Read Less';
                }
            });
        });

        // Attach click listener to the entire card to navigate to details page
        document.querySelectorAll('.movie-card').forEach(card => {
            card.addEventListener('click', (event) => {
                // Prevent navigating if clicking the "Read More" button or "Watch Now" link
                if (event.target.classList.contains('read-more-btn') || event.target.closest('.watch-button')) {
                    return;
                }
                const movieId = card.dataset.id;
                const movieTitle = card.querySelector('.movie-card-title').textContent;
                window.location.href = `details.html?title=${encodeURIComponent(movieTitle)}`;
            });
        });
    }

    /**
     * Sorts the given array of movies based on the selected order.
     * @param {Array<Object>} movies - The array of movie objects to sort.
     * @param {string} sortOrder - The sorting criterion ('release_desc', 'popularity_desc', 'rating_desc').
     * @returns {Array<Object>} The sorted array of movies.
     */
    function sortMovies(movies, sortOrder) {
        return [...movies].sort((a, b) => {
            if (sortOrder === 'release_desc') {
                return b.year - a.year; // Newest first
            } else if (sortOrder === 'popularity_desc') {
                return b.popularityScore - a.popularityScore; // Highest popularity first
            } else if (sortOrder === 'rating_desc') {
                // Handle "Expected" ratings - put them at the end
                const ratingA = typeof a.rating === 'number' ? a.rating : -Infinity;
                const ratingB = typeof b.rating === 'number' ? b.rating : -Infinity;
                return ratingB - ratingA; // Highest rating first
            }
            return 0; // No sort
        });
    }


    // --- Event Listeners and Initial Page Load Logic ---

    document.addEventListener("DOMContentLoaded", () => {
        // --- Header Search and Mobile Nav Logic (from standalone_header.js consolidated) ---
        const searchIcon = document.getElementById("searchIcon");
        const searchSubheader = document.getElementById("searchSubheader");
        const searchInput = document.getElementById("searchInput");
        const clearSearch = document.getElementById("clearSearch");
        const suggestionsBox = document.getElementById("suggestionsBox");
        const darkModeToggle = document.getElementById("darkModeToggle");
        const addIcon = document.getElementById("addIcon");
        const accountIcon = document.getElementById("accountIcon");
        const accountDropdown = document.getElementById("accountDropdown");
        const hamburgerMenu = document.getElementById("hamburgerMenu");
        const mobileNavOverlay = document.getElementById("mobileNavOverlay");

        // Ensure all necessary elements are present
        if (!searchIcon || !searchSubheader || !searchInput || !suggestionsBox ||
            !darkModeToggle || !addIcon || !accountIcon || !accountDropdown ||
            !hamburgerMenu || !mobileNavOverlay) {
            console.error("Critical header elements are missing. Header functionality may be limited.");
        } else {
             // State variables for search
            let searchScope = null;
            let selectedIndex = -1;

            searchIcon.addEventListener("click", () => {
                searchSubheader.classList.toggle("visible");
                if (searchSubheader.classList.contains("visible")) {
                    searchInput.focus();
                    if (!searchScope) {
                        showPrimarySuggestions(suggestionsBox);
                    }
                } else {
                    suggestionsBox.classList.remove("visible");
                    searchInput.value = "";
                    searchScope = null;
                    selectedIndex = -1;
                }
            });

            clearSearch.addEventListener("click", () => {
                searchInput.value = "";
                searchScope = null;
                selectedIndex = -1;
                showPrimarySuggestions(suggestionsBox);
                searchInput.focus();
            });

            searchInput.addEventListener("input", () => {
                selectedIndex = -1;
                const val = searchInput.value.trim();

                if (!searchScope) {
                    if (val === "") {
                        showPrimarySuggestions(suggestionsBox);
                    } else {
                        renderShowTitleSuggestions(suggestionsBox, showsData.filter(s =>
                            s.title.toLowerCase().includes(val.toLowerCase()) ||
                            (Array.isArray(s.genre) && s.genre.some(g => g.toLowerCase().includes(val.toLowerCase()))) ||
                            (s.cast && s.cast.some(c => c.name.toLowerCase().includes(val.toLowerCase())))
                        ).map(s => s.title));
                    }
                } else {
                    const [scopeType, scopeValue] = searchScope.split(':');
                    const filteredByScope = showsData.filter(s => {
                        if (scopeType === "genre" && Array.isArray(s.genre)) return s.genre.some(g => g.toLowerCase() === scopeValue.toLowerCase());
                        return true;
                    });
                    renderShowTitleSuggestions(suggestionsBox, filteredByScope.filter(s =>
                        s.title.toLowerCase().includes(val.toLowerCase())
                    ).map(s => s.title));
                }
            });

            suggestionsBox.addEventListener("click", (event) => {
                const target = event.target;
                if (target.classList.contains('suggestion-item')) {
                    const suggestionText = target.textContent.trim();
                    const showTitleMatch = showsData.find(show => show.title === suggestionText.split(' (')[0]);

                    if (showTitleMatch) {
                        window.location.href = `details.html?title=${encodeURIComponent(showTitleMatch.title)}`;
                    } else if (target.classList.contains('primary-suggestion')) {
                        searchScope = `genre:${suggestionText}`;
                        searchInput.value = `${suggestionText}: `;
                        suggestionsBox.classList.remove("visible");
                        searchInput.focus();
                        renderShowTitleSuggestions(suggestionsBox, showsData.filter(s =>
                            Array.isArray(s.genre) && s.genre.some(g => g.toLowerCase() === suggestionText.toLowerCase())
                        ).map(s => s.title));
                    }
                }
                selectedIndex = -1;
            });

            searchInput.addEventListener("keydown", (e) => {
                const suggestions = suggestionsBox.querySelectorAll(".suggestion-item");
                if (suggestions.length === 0) return;

                if (e.key === "ArrowDown") {
                    e.preventDefault();
                    selectedIndex = (selectedIndex + 1) % suggestions.length;
                    highlightSelectedSuggestion(suggestions, selectedIndex);
                } else if (e.key === "ArrowUp") {
                    e.preventDefault();
                    selectedIndex = (selectedIndex - 1 + suggestions.length) % suggestions.length;
                    highlightSelectedSuggestion(suggestions, selectedIndex);
                } else if (e.key === "Enter") {
                    e.preventDefault();
                    if (selectedIndex !== -1) {
                        suggestions[selectedIndex].click();
                    }
                }
            });

            function highlightSelectedSuggestion(suggestions, index) {
                suggestions.forEach((div, i) => {
                    if (i === index) {
                        div.classList.add("selected");
                        div.scrollIntoView({ block: "nearest", inline: "nearest" });
                    } else {
                        div.classList.remove("selected");
                    }
                });
            }

            document.addEventListener("click", (event) => {
                if (!searchSubheader.contains(event.target) && event.target !== searchIcon) {
                    searchSubheader.classList.remove("visible");
                    suggestionsBox.classList.remove("visible");
                    searchInput.value = "";
                    searchScope = null;
                    selectedIndex = -1;
                }
                if (!accountDropdown.contains(event.target) && event.target !== accountIcon) {
                    accountDropdown.classList.remove("visible");
                }
            });

            accountIcon.addEventListener("click", () => {
                accountDropdown.classList.toggle("visible");
                updateAccountDropdown(userLoggedIn);
            });

            darkModeToggle.addEventListener("click", () => {
                toggleDarkMode();
            });

            addIcon.addEventListener('click', (event) => {
                event.preventDefault();
                if (userLoggedIn) {
                    showMessageBox("Redirecting to settings for watchlist management (simulated)...", "fas fa-info-circle blue-icon");
                } else {
                    showMessageBox("You must be logged in to add shows to your playlist!", "fas fa-exclamation-triangle red-icon");
                }
            });

            hamburgerMenu.addEventListener('click', () => {
                mobileNavOverlay.classList.add('show');
            });

            mobileNavOverlay.addEventListener('click', (event) => {
                if (event.target === mobileNavOverlay || event.target.tagName === 'A') {
                    mobileNavOverlay.classList.remove('show');
                }
            });
            document.getElementById('closeMobileNav').addEventListener('click', () => {
                mobileNavOverlay.classList.remove('show');
            });
        }

        // --- Movies Page Initialization ---
        const movies = showsData.filter(show => show.type === 'movie');
        let currentMovies = [...movies]; // Working copy of movies

        // Get sort select element
        const sortOrderSelect = document.getElementById('sortOrder');

        // Initial render with default sort (Release Year - Newest First)
        currentMovies = sortMovies(movies, 'release_desc');
        renderMovies(currentMovies);

        // Add event listener for sort order change
        if (sortOrderSelect) {
            sortOrderSelect.addEventListener('change', (event) => {
                const selectedSort = event.target.value;
                currentMovies = sortMovies(movies, selectedSort);
                renderMovies(currentMovies);
            });
        }


        // Initial update of account dropdown state
        const storedTheme = localStorage.getItem('theme');
        if (storedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            const darkModeToggle = document.getElementById('darkModeToggle');
            if (darkModeToggle) {
                darkModeToggle.classList.replace('fa-moon', 'fa-sun');
                darkModeToggle.setAttribute('title', 'Toggle Light Mode');
            }
        }
        updateAccountDropdown(false);

        // Update the current year in the footer
        const currentYearSpan = document.getElementById('current-year');
        if (currentYearSpan) {
            currentYearSpan.textContent = new Date().getFullYear();
        }

        // Last Modified Date (footer)
        const lastModifiedSpan = document.getElementById('last-modified');
        if (lastModifiedSpan) {
            lastModifiedSpan.textContent = new Date(document.lastModified).toLocaleDateString();
        } else {
            console.warn("Last Modified span not found.");
        }
    });
  </script>
</body>
</html>
