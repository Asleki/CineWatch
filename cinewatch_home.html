<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CineWatch - Stream, Discover, Repeat</title>
  
  <!-- Font Awesome CDN for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Inter Font (for consistent typography across the site) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Consolidated Main Stylesheet -->
  <style>
    /*
     * File: main.css
     * Description: Consolidated and updated styles for the CineWatch application,
     * including responsive design, new carousel layout, redesigned show cards,
     * and dark mode theming.
     * This version includes styling for new hero show/quote cards,
     * removal of border-radius in the hero section,
     * and reduced width for show cards in carousels.
     */

    /* Root Theme Variables */
    :root {
      --bg: #fff;
      --text: #111;
      --header-bg: #f0ecec;
      --search-bg: #f4f4f4;
      --highlight: rgb(28, 12, 241); /* Blue used for highlight */
      --danger: #f44336;
      --cinewatch-blue: #000080; /* Dark blue color for CineWatch name */

      /* Variables for custom message box & dropdown in light mode */
      --message-box-bg: #fff;
      --message-box-text: #111;
      --message-box-border: #ccc;
      --message-box-button-bg: #007bff;
      --message-box-button-text: white;
      --message-box-button-hover-bg: #0056b3;

      --dropdown-bg: #fff;
      --dropdown-item-hover-bg: #f0f0f0;
      --dropdown-border: #ddd;

      /* Specific for carousel */
      --carousel-bg: #f0f0f0;
      --card-bg: #ffffff;
      --card-border: #e0e0e0;
      --card-shadow: rgba(0, 0, 0, 0.1);
      --play-icon-color: rgba(255, 255, 255, 0.8);
      --play-icon-hover-color: rgba(255, 255, 255, 1);

      
      /* Additional variables for the new footer */
      --primary-color: #0056b3; /* A vibrant blue for main accents and headings */
      --secondary-color: #007bff; /* A slightly lighter blue for links and secondary actions */
      --accent-color: #f39c12; /* Orange for highlights and call-to-action elements */
      --text-color-light: #2C3E50; /* Dark, almost black blue-gray for readability */
      --background-color-light: #F0F8FF; /* Alice Blue - very light, airy blue */
      --section-bg-light: #E6F7FF; /* Pale blue for section backgrounds */
      --border-color-light: #A0D9EF; /* Medium blue for borders */
      --shadow-color-light: rgba(70, 130, 180, 0.2); /* Steel blue with transparency for subtle shadow */
      --header-bg-light: #C9EEFF; /* Light Cyan-like blue for headers */

      /* Footer specific grey colors */
      --footer-bg-light-grey: #e0e0e0; /* Light grey for footer in light mode */
      --footer-bg-dark-grey: #333333; /* Darker grey for footer in dark mode */
    }

    /* Dark Mode Theme Variables */
    body.dark-mode {
      --bg: #1a1a1a;
      --text: #f0f0f0;
      --header-bg: #2a2a2a;
      --search-bg: #3a3a3a;
      --highlight: #6699ff; /* Lighter blue for dark mode highlight */
      --danger: #ff6b6b;
      --cinewatch-blue: #ADD8E6; /* Light blue for CineWatch name in dark mode */

      /* Variables for custom message box & dropdown in dark mode */
      --message-box-bg: #333;
      --message-box-text: #f0f0f0;
      --message-box-border: #555;
      --message-box-button-bg: #6699ff;
      --message-box-button-text: #111;
      --message-box-button-hover-bg: #4477ee;

      --dropdown-bg: #333;
      --dropdown-item-hover-bg: #444;
      --dropdown-border: #555;

      /* Specific for carousel in dark mode */
      --carousel-bg: #2a2a2a;
      --card-bg: #3a3a3a;
      --card-border: #444;
      --card-shadow: rgba(0, 0, 0, 0.3);
    }

    /* Base Styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      color: var(--text);
      background-color: var(--bg);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    a {
      color: var(--highlight);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    img {
        max-width: 100%;
        height: auto;
        display: block; /* Removes extra space below image */
    }

    /* --- Header --- */
    #utilityHeader {
      position: sticky;
      top: 0;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: var(--header-bg);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      transition: background-color 0.3s ease;
    }

    #utilityHeader .logo {
      font-weight: 700;
      font-size: 1.8rem;
    }

    #utilityHeader .logo a {
      color: var(--cinewatch-blue);
      text-decoration: none;
    }

    .header-icons {
      display: flex;
      gap: 20px;
    }

    .header-icons i {
      font-size: 1.4rem;
      cursor: pointer;
      color: var(--text);
      transition: color 0.2s ease, transform 0.2s ease;
    }

    .header-icons i:hover {
      color: var(--highlight);
      transform: scale(1.1);
    }

    /* --- Search Subheader --- */
    .search-subheader {
      position: absolute;
      top: 60px; /* Below the header */
      right: 0; /* Start from the right */
      width: 100%;
      max-width: 500px; /* Limit width to give animation space */
      background-color: var(--search-bg);
      padding: 10px 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 999; /* Below header, above main content */
      transform: translateX(100%); /* Start hidden off-screen to the right */
      transition: transform 0.3s ease-in-out;
      display: flex; /* Use flex for layout */
      flex-direction: column; /* Stack input and suggestions */
      gap: 10px;
      border-bottom-left-radius: 8px;
      border-bottom-right-radius: 8px;
    }

    .search-subheader.visible {
      transform: translateX(0); /* Slide in from the right */
    }

    .search-bar-container {
      display: flex;
      align-items: center;
      width: 100%;
      border: 1px solid var(--dropdown-border);
      border-radius: 20px;
      background-color: var(--bg);
      padding: 5px 15px;
    }

    #searchInput {
      flex-grow: 1;
      border: none;
      padding: 8px;
      font-size: 1rem;
      background-color: transparent;
      color: var(--text);
      outline: none;
    }

    #searchInput::placeholder {
      color: var(--text); /* Adjust placeholder color */
      opacity: 0.7;
    }

    .clear-search-btn {
      background: none;
      border: none;
      color: var(--text);
      font-size: 1rem;
      cursor: pointer;
      padding: 5px;
      transition: color 0.2s ease;
    }

    .clear-search-btn:hover {
      color: var(--danger);
    }

    .suggestions-box {
      width: calc(100% - 40px); /* Adjust for padding of search-subheader */
      background-color: var(--dropdown-bg);
      border: 1px solid var(--dropdown-border);
      border-radius: 8px;
      max-height: 200px;
      overflow-y: auto;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      position: relative; /* Relative to search-subheader */
      left: 0;
      top: 0;
      display: none; /* Hidden by default */
    }

    .suggestions-box.visible {
      display: block;
    }

    .suggestion-item {
      padding: 10px 15px;
      cursor: pointer;
      color: var(--text);
      border-bottom: 1px solid var(--dropdown-border);
    }

    .suggestion-item:last-child {
      border-bottom: none;
    }

    .suggestion-item:hover {
      background-color: var(--dropdown-item-hover-bg);
    }

    .suggestion-item.primary-suggestion {
      font-weight: 500;
      color: var(--highlight);
    }


    /* --- Account Dropdown --- */
    .account-dropdown {
      position: absolute;
      top: 60px; /* Below header */
      right: 20px;
      background-color: var(--dropdown-bg);
      border: 1px solid var(--dropdown-border);
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      display: none; /* Hidden by default */
      flex-direction: column;
      min-width: 180px; /* Increased min-width for new links */
      padding: 10px 0;
      z-index: 1000;
    }

    .account-dropdown.visible {
      display: flex;
    }

    .account-dropdown a {
      padding: 10px 15px;
      color: var(--text);
      text-decoration: none;
      white-space: nowrap;
      transition: background-color 0.2s ease;
      display: flex; /* For icons */
      align-items: center; /* For icons */
    }

    .account-dropdown a i {
        margin-right: 10px; /* Space between icon and text */
    }

    .account-dropdown a:hover {
      background-color: var(--dropdown-item-hover-bg);
      text-decoration: none;
    }

    .account-dropdown .logout-item {
        color: var(--danger);
        border-top: 1px solid var(--dropdown-border);
        margin-top: 5px;
        padding-top: 10px;
    }

    .account-dropdown .logout-item:hover {
        background-color: var(--danger);
        color: white;
    }


    /* --- Main Subheader with Tagline and Nav --- */
    .main-subheader {
        background-color: var(--header-bg);
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap; /* Allow wrapping on smaller screens */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        z-index: 990; /* Below search subheader, above main content */
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
    }

    .site-tagline {
        font-size: 1.1rem;
        color: var(--text);
        font-weight: 500;
        margin: 5px 0;
    }

    .main-nav ul {
        list-style: none;
        display: flex;
        gap: 25px;
    }

    .main-nav a {
        color: var(--cinewatch-blue);
        font-weight: 600;
        font-size: 1rem;
        transition: color 0.2s ease, text-decoration 0.2s ease;
        white-space: nowrap; /* Prevent nav items from wrapping */
    }

    .main-nav a:hover {
        color: var(--highlight);
        text-decoration: underline;
    }


    /* --- Mobile Navigation Overlay --- */
    .mobile-nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 1001;
      display: flex;
      justify-content: center;
      align-items: center;
      visibility: hidden;
      opacity: 0;
      transition: visibility 0.3s ease, opacity 0.3s ease;
    }

    .mobile-nav-overlay.show {
      visibility: visible;
      opacity: 1;
    }

    .mobile-nav-content {
      background-color: var(--bg);
      padding: 30px;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      position: relative;
      width: 80%; /* Adjust for mobile screen */
      max-width: 300px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .mobile-nav-content .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.5rem;
      color: var(--text);
      cursor: pointer;
    }

    .mobile-nav-content a {
      color: var(--text);
      font-size: 1.2rem;
      font-weight: 500;
      padding: 10px;
      text-align: center;
      border-radius: 5px;
      transition: background-color 0.2s ease, color 0.2s ease;
      display: flex; /* For icons */
      align-items: center; /* For icons */
      justify-content: center; /* Center text and icon */
    }
    .mobile-nav-content a i {
        margin-right: 10px;
    }

    .mobile-nav-content a:hover,
    .mobile-nav-content a.active {
      background-color: var(--highlight);
      color: white;
      text-decoration: none;
    }

    .mobile-login-btn, .mobile-logout-btn {
      margin-top: 20px;
      background-color: var(--cinewatch-blue);
      color: white;
      font-weight: bold;
    }

    .mobile-login-btn:hover, .mobile-logout-btn:hover {
        background-color: var(--highlight);
    }


    /* --- Hero Section --- */
    .hero-section {
      position: relative;
      width: 100%;
      height: 600px; /* Increased height for better visibility of two cards */
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
      overflow: hidden;
      transition: background-image 0.5s ease-in-out;
      /* Removed border-radius as requested */
      border-radius: 0;
    }

    .hero-content {
      display: flex;
      flex-direction: row; /* Arrange cards side-by-side */
      gap: 40px; /* Space between the show card and quote card */
      align-items: center; /* Vertically align items in the middle */
      padding: 20px;
      max-width: 1200px; /* Limit content width */
      width: 100%;
      justify-content: center; /* Center the cards horizontally */
    }

    /* New Hero Show Card */
    .hero-show-card {
        background-color: rgba(0, 0, 0, 0.6); /* Semi-transparent background */
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        display: flex;
        justify-content: center;
        align-items: center;
        max-width: 250px; /* Control the size of the show card */
        min-width: 200px; /* Ensure it doesn't get too small */
    }

    .hero-poster {
        width: 100%; /* Make poster fill its container */
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    /* New Hero Quote Card */
    .hero-quote-card {
        background-color: rgba(0, 0, 0, 0.6); /* Semi-transparent background */
        padding: 25px 35px;
        border-radius: 15px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        flex-grow: 1; /* Allow it to take available space */
        max-width: 600px; /* Limit quote card width */
        display: flex;
        align-items: center; /* Center quote text vertically */
    }

    .hero-quote {
      font-size: 2.2rem;
      font-weight: 600;
      font-style: italic;
      text-align: center;
    }




    /* --- Category Sections --- */
    .category-sections {
      padding: 40px 20px;
      background-color: var(--bg);
      transition: background-color 0.3s ease;
    }

    .category-section {
      margin-bottom: 50px;
    }

    .category-section .category-title {
      font-size: 2rem;
      color: var(--text);
      margin-bottom: 30px;
      border-bottom: 3px solid var(--highlight);
      display: inline-block;
      padding-bottom: 5px;
    }

    /* --- Carousel Container --- */
    .carousel-container {
      position: relative;
      overflow: hidden; /* Hide scrollbar but allow scrolling via JS */
      padding: 10px 0; /* Padding for card shadows */
      background-color: var(--carousel-bg);
      border-radius: 15px;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
    }

    .carousel-track {
      display: flex;
      gap: 20px; /* Space between cards */
      padding: 10px 20px; /* Padding inside the track */
      overflow-x: scroll; /* Enable horizontal scrolling */
      scroll-snap-type: x mandatory; /* For smooth snapping */
      -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
      scrollbar-width: none; /* Hide scrollbar for Firefox */
      transition: scroll-left 0.3s ease-in-out; /* Smooth scroll effect */
    }

    /* Hide scrollbar for Webkit browsers (Chrome, Safari) */
    .carousel-track::-webkit-scrollbar {
      display: none;
    }

    .carousel-nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      padding: 15px 10px;
      font-size: 1.8rem;
      cursor: pointer;
      z-index: 10;
      border-radius: 8px;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .carousel-nav-btn:hover {
      background-color: rgba(0, 0, 0, 0.8);
      transform: translateY(-50%) scale(1.05);
    }

    .carousel-nav-btn.prev {
      left: 0;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    .carousel-nav-btn.next {
      right: 0;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    /* --- Show Card --- */
    .show-card {
      flex: 0 0 auto; /* Do not grow, do not shrink, base width as below */
      width: 250px; /* Default width */
      background-color: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 15px;
      box-shadow: 0 4px 10px var(--card-shadow);
      overflow: hidden;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      margin-right: 0; /* Gap is handled by carousel-track gap */
      scroll-snap-align: start; /* Snap to start of card */
      display: flex;
      flex-direction: column;
    }

    .show-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px var(--card-shadow);
    }

    .show-card-poster-container {
      position: relative;
      width: 100%;
      height: 0; /* To maintain aspect ratio */
      padding-bottom: 140%; /* Approx 1:1.4 aspect ratio for posters */
      overflow: hidden;
      border-bottom: 1px solid var(--card-border);
    }

    .show-card-poster {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover; /* Ensures image covers the area without distortion */
      border-top-left-radius: 15px;
      border-top-right-radius: 15px;
    }

    .play-button-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .show-card-poster-container:hover .play-button-overlay {
      opacity: 1;
    }

    .play-icon {
      font-size: 3.5rem;
      color: var(--play-icon-color);
      cursor: pointer;
      transition: color 0.2s ease, transform 0.2s ease;
    }

    .play-icon:hover {
      color: var(--play-icon-hover-color);
      transform: scale(1.1);
    }


    .show-card-details {
      padding: 15px;
      flex-grow: 1; /* Allows details section to fill remaining space */
      display: flex;
      flex-direction: column;
      justify-content: space-between; /* Pushes actions to bottom */
    }

    .show-card-title {
      font-size: 1.3rem;
      margin-bottom: 8px;
      color: var(--text);
      line-height: 1.2;
      cursor: pointer; /* Indicate clickable title */
    }

    .show-card-title:hover {
        text-decoration: underline;
    }

    .show-card-meta {
      font-size: 0.9rem;
      color: var(--text);
      opacity: 0.7;
      margin-bottom: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .show-card-meta span {
        white-space: nowrap; /* Prevent wrapping for individual meta items */
    }

    .show-card-rating i {
      color: gold;
    }

    .show-card-description {
      font-size: 0.9rem;
      color: var(--text);
      opacity: 0.8;
      margin-bottom: 15px;
      display: -webkit-box;
      -webkit-line-clamp: 3; /* Limit to 3 lines */
      line-clamp: 3; /* Standard property for compatibility */
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .show-card-cast { /* Added style for cast info */
        font-size: 0.85rem;
        color: var(--text);
        opacity: 0.8;
        margin-bottom: 10px;
    }

    .show-card-actions {
      display: flex;
      gap: 10px;
      margin-top: auto; /* Pushes actions to the bottom */
    }

    .show-card-actions button {
      flex-grow: 1;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .add-to-watchlist-btn {
      background-color: var(--highlight);
      color: white;
    }

    .add-to-watchlist-btn:hover {
      background-color: #0056b3;
      transform: translateY(-2px);
    }

    .share-btn {
      background-color: var(--card-border); /* A lighter, neutral color */
      color: var(--text);
    }

    .share-btn:hover {
      background-color: var(--dropdown-item-hover-bg);
      transform: translateY(-2px);
    }

   .footer-content {
        display: flex;
        flex-direction: row; /* Single row on large screens */
        flex-wrap: wrap; /* Allow items to wrap if screen is not wide enough */
        justify-content: space-around; /* Distribute items with space around them */
        gap: 20px;
        max-width: 1200px; /* Increased max-width for better multi-column display */
        margin: 0 auto; /* Center the footer content */
        padding: 0 20px; /* Add padding for content inside footer */
        text-align: left; /* Default text alignment for multi-column */
        
    }

    .footer-section {
        flex: 1; /* Allow sections to grow and shrink */
        min-width: 200px; /* Minimum width for each column */
        max-width: 250px; /* Maximum width for each column to prevent excessive stretching */
        text-align: left; /* Align text left within each section */
    }

    .footer-section h3 {
        font-size: 1.2rem;
        margin-bottom: 1rem;
        color: var(--primary-color);
    }

    body.dark-mode .footer-section h3 {
        color: var(--accent-color);
    }

    .footer-section p,
    .footer-section a {
        font-size: 0.9rem;
        color: inherit;
        text-decoration: none;
        display: block;
        margin-bottom: 0.5rem;
        transition: color 0.3s ease;
    }

    .footer-section a:hover {
        color: var(--secondary-color); /* Apply hover color */
        text-decoration: underline; /* Add underline on hover */
    }

    /* Social Icons Container */
    .social-icons { 
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 1rem;
    }

    .social-icons img {
        height: 30px;
        width: 30px;
        transition: transform 0.2s ease, filter 0.3s ease;
    }

    .social-icons img:hover {
        transform: scale(1.1);
    }

    body.dark-mode .social-icons img {
        filter: none;
        color: var(--accent-color, #f39c12); /* Or another suitable color for dark mode */
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .footer-content {
            flex-direction: column; /* Stack vertically on small screens */
            align-items: center;
            text-align: center; /* Center text for stacked layout */
            gap: 10px; /* Reduce vertical gap for tighter layout */
        }
        .footer-section {
            width: 100%; /* Full width for sections on small screens */
            max-width: unset; /* Remove max-width constraint */
            text-align: center; /* Center text within sections on mobile */
        }
        .social-icons {
            justify-content: center; /* Ensure social icons remain centered on mobile */
        }
    }
    
    /* --- Custom Alert/Message Box --- */
    .custom-alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      visibility: hidden;
      opacity: 0;
      transition: visibility 0.3s ease, opacity 0.3s ease;
    }

    .custom-alert-overlay.show {
      visibility: visible;
      opacity: 1;
    }

    .alert-content {
      background-color: var(--message-box-bg);
      color: var(--message-box-text);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      text-align: center;
      max-width: 400px;
      width: 90%;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      border: 1px solid var(--message-box-border);
    }

    .alert-icon {
      font-size: 3rem;
      margin-bottom: 10px;
    }

    /* Icon Colors */
    .blue-icon { color: var(--highlight); }
    .green-icon { color: #28a745; }
    .red-icon { color: var(--danger); }
    .orange-icon { color: #ffc107; }

    #alertMessage {
      font-size: 1.1rem;
      margin-bottom: 15px;
      word-wrap: break-word;
    }

    .close-alert-btn {
      background-color: var(--message-box-button-bg);
      color: var(--message-box-button-text);
      border: none;
      padding: 10px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .close-alert-btn:hover {
      background-color: var(--message-box-button-hover-bg);
      transform: translateY(-1px);
    }


    /* --- Responsive Design --- */

    @media (max-width: 1200px) { /* Adjust for larger desktops/laptops */
        .show-card {
            width: 220px; /* Slightly smaller for more cards per row */
        }
    }

    @media (max-width: 1024px) {
        .hero-content {
            gap: 30px;
        }
        .hero-quote {
            font-size: 1.8rem;
        }
        .hero-show-card {
            max-width: 200px;
            min-width: 160px;
        }
        .hero-quote-card {
            padding: 20px 30px;
            max-width: 500px;
        }
        .show-card {
            width: 200px; /* Reduced width for 3-column layout on medium screens */
        }
        .category-section .category-title {
            font-size: 1.8rem;
        }
        .main-nav ul {
            gap: 15px;
        }
    }

    @media (max-width: 768px) {
        #utilityHeader {
            padding: 8px 15px;
            /* Center logo and icons vertically when stacked or fewer items */
            flex-direction: column; /* Stack logo and icons */
            align-items: center; /* Center items */
            gap: 10px;
        }
        #utilityHeader .logo {
            font-size: 1.6rem;
        }
        .header-icons {
            gap: 15px;
            width: 100%; /* Take full width to center icons */
            justify-content: center; /* Center icons horizontally */
        }
        .header-icons i {
            font-size: 1.3rem;
        }

        /* Hide account icon and main nav, show hamburger */
        #accountIcon, .main-nav {
            display: none;
        }
        #hamburgerMenu {
            display: block; /* Show hamburger menu on smaller screens */
        }

        .search-subheader {
            top: 80px; /* Adjust for stacked header */
            padding: 8px 10px;
            max-width: 100%; /* Take full width on smaller screens */
        }
        .search-bar-container {
            padding: 3px 10px;
            flex-direction: row; /* Keep input and clear button in a row */
            gap: 5px;
        }
        #searchInput {
            width: 100%;
            padding: 5px;
        }
        #suggestionsBox {
            left: 10px;
            width: calc(100% - 20px);
        }

        .main-subheader { /* Adjust for mobile layout */
            flex-direction: column;
            text-align: center;
            padding: 10px 15px;
        }
        .site-tagline {
            margin-bottom: 10px;
        }
        /* Main nav is hidden on mobile, handled by hamburger */

        .hero-section {
            height: 500px; /* Adjust hero height for stacked cards */
        }

        .hero-content {
            flex-direction: column; /* Stack show card and quote card vertically */
            gap: 25px;
            text-align: center;
            padding: 15px;
        }

        .hero-show-card {
            max-width: 200px; /* Keep similar size */
            min-width: 180px;
            order: 1; /* Show poster first */
        }

        .hero-quote-card {
            max-width: 90%; /* Take more width when stacked */
            padding: 20px;
            order: 2; /* Show quote second */
        }

        .hero-quote {
            font-size: 1.6rem;
        }

        .category-section {
            padding: 15px;
            margin-bottom: 30px;
        }
        .category-section .category-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        .show-card {
            width: calc(33.333% - 13.333px); /* 3 cards per row */
            /* width: 220px; fallback if calc not working, but flex handles it better */
        }
        .show-card-details {
            padding: 10px;
        }
        .show-card-title {
            font-size: 1.1rem;
        }
        .show-card-meta, .show-card-description, .show-card-actions button {
            font-size: 0.8rem;
        }

        .footer-container {
            flex-direction: column;
            gap: 15px;
        }
        .footer-logo, .footer-nav ul, .footer-info {
            flex-basis: 100%;
            margin-bottom: 0; /* Reset margins for flex-direction column */
        }
        .footer-nav ul {
            flex-direction: column;
            gap: 10px;
        }
        .social-links {
            margin-top: 10px;
        }
    }

        /* Footer Styles */
    .site-footer {
        background-color: var(--footer-bg-light-grey); /* Changed to light grey */
        color: var(--text-color-light);
        padding: 2rem 0;
        margin-top: auto;
        box-shadow: 0 -2px 5px var(--shadow-color-light);
        transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
    }

    body.dark-mode .site-footer {
        background-color: var(--footer-bg-dark-grey); /* Changed to darker grey */
        color: var(--text-color-dark);
        box-shadow: 0 -2px 5px var(--shadow-color-dark);
    }

    .footer-content {
        display: flex;
        flex-direction: row; /* Single row on large screens */
        flex-wrap: wrap; /* Allow items to wrap if screen is not wide enough */
        justify-content: space-around; /* Distribute items with space around them */
        gap: 20px;
        max-width: 1200px; /* Increased max-width for better multi-column display */
        margin: 0 auto; /* Center the footer content */
        padding: 0 20px; /* Add padding for content inside footer */
        text-align: left; /* Default text alignment for multi-column */
    }

    .footer-section {
        flex: 1; /* Allow sections to grow and shrink */
        min-width: 200px; /* Minimum width for each column */
        max-width: 250px; /* Maximum width for each column to prevent excessive stretching */
        text-align: left; /* Align text left within each section */
    }

    .footer-section h3 {
        font-size: 1.2rem;
        margin-bottom: 1rem;
        color: var(--primary-color);
    }

    body.dark-mode .footer-section h3 {
        color: var(--accent-color);
    }

    .footer-section p,
    .footer-section a {
        font-size: 0.9rem;
        color: inherit;
        text-decoration: none;
        display: block;
        margin-bottom: 0.5rem;
        transition: color 0.3s ease;
    }

    .footer-section a:hover {
        color: var(--secondary-color); /* Apply hover color */
        text-decoration: underline; /* Add underline on hover */
    }

    /* Social Icons Container */
    .social-icons { 
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 1rem;
    }

    .social-icons img {
        height: 30px;
        width: 30px;
        transition: transform 0.2s ease, filter 0.3s ease;
    }

    .social-icons img:hover {
        transform: scale(1.1);
    }



    /* Responsive adjustments */
    @media (max-width: 768px) {
         .faq-question {
            font-size: 1em;
            padding: 12px 15px;
        }
        
        .footer-content {
            flex-direction: column; /* Stack vertically on small screens */
            align-items: center;
            text-align: center; /* Center text for stacked layout */
        }
        .footer-section {
            width: 100%; /* Full width for sections on small screens */
            max-width: unset; /* Remove max-width constraint */
            text-align: center; /* Center text within sections on mobile */
        }
        .social-icons {
            justify-content: center; /* Ensure social icons remain centered on mobile */
        }
    }

    @media (max-width: 600px) { /* Even smaller mobile screens */
        .show-card {
            width: calc(50% - 10px); /* 2 cards per row */
            /* width: 180px; fallback */
        }
        .carousel-track {
            gap: 15px; /* Adjust gap for 2 columns */
        }
    }

    @media (max-width: 480px) {
        #utilityHeader .logo {
            font-size: 1.4rem;
        }
        .header-icons i {
            font-size: 1.2rem;
        }
        .search-subheader {
            top: 70px; /* Adjust for very small header */
        }
        .hero-quote {
            font-size: 1.4rem;
        }
        .hero-show-card, .hero-quote-card {
            padding: 15px;
            border-radius: 10px;
        }
        .show-card {
            width: calc(50% - 10px); /* Keep 2 cards per row */
            /* width: 160px; fallback */
        }
        .alert-content {
            padding: 20px;
            gap: 15px;
        }
        .alert-icon {
            font-size: 2.5rem;
        }
        #alertMessage {
            font-size: 1rem;
        }
        .close-alert-btn {
            padding: 8px 20px;
            font-size: 0.9rem;
        }
    }
  </style>
</head>
<body>

  <!-- Utility Header (Fixed/Sticky - contains Logo and Icons) -->
  <header id="utilityHeader">
    <div class="logo"><a href="cinewatch_home.html">CineWatch</a></div>
    <div class="header-icons">
      <i id="searchIcon" class="fas fa-search" title="Search"></i>
      <i id="addIcon" class="fas fa-plus-circle" title="Add to Watchlist"></i>
      <i id="accountIcon" class="fas fa-user-circle" title="Account"></i>
      <i id="darkModeToggle" class="fas fa-moon" title="Toggle Dark Mode"></i>
      <i id="hamburgerMenu" class="fas fa-bars" title="Menu"></i>
    </div>
  </header>

  <!-- Search Subheader (Initially hidden, slides down on search icon click) -->
  <div id="searchSubheader" class="search-subheader">
    <div class="search-bar-container">
      <input type="text" id="searchInput" placeholder="Search movies, series, genres..." autocomplete="off">
      <button id="clearSearch" class="clear-search-btn" title="Clear search"><i class="fas fa-times"></i></button>
    </div>
    <div id="suggestionsBox" class="suggestions-box">
      <!-- Search suggestions will be rendered here by JavaScript -->
    </div>
  </div>

  <!-- Account Dropdown (Hidden by default, appears on account icon click) -->
  <div id="accountDropdown" class="account-dropdown">
    <a href="login.html" id="loginLink">Login</a>
    <a href="signup.html" id="registerLink">Register</a>
    <a href="profile.html" id="profileLink" style="display:none;"><i class="fas fa-user"></i> Profile</a>
    <a href="#" id="playlistLink" class="account-item"><i class="fas fa-list-ul"></i> Playlist</a>
    <a href="#" id="bookmarksLink" class="account-item"><i class="fas fa-bookmark"></i> Bookmarks</a>
    <a href="#" id="favoritesLink" class="account-item"><i class="fas fa-heart"></i> Favorites</a>
    <a href="settings.html" id="settingsLink" class="account-item"><i class="fas fa-cog"></i> Settings</a>
    <a href="#" id="logoutLink" style="display:none;" class="account-item logout-item"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </div>

  <!-- Main Subheader (Contains Nav Links and Tagline, Scrolls with page) -->
  <div id="mainSubheader" class="main-subheader">
    <p class="site-tagline">Stream, Discover, Repeat</p>
    <nav class="main-nav">
      <ul>
        <li><a href="movies.html">Movies</a></li>
        <li><a href="tv_shows.html">TV Shows</a></li>
        <li><a href="cinema_guide.html">Cinema Guide</a></li>
        <li><a href="about_us.html">About Us</a></li>
      </ul>
    </nav>
  </div>

  <!-- Mobile Navigation Overlay (Hidden by default, appears on hamburger click) -->
  <div id="mobileNavOverlay" class="mobile-nav-overlay">
    <div class="mobile-nav-content">
      <i id="closeMobileNav" class="fas fa-times close-btn"></i>
      <a href="cinewatch_home.html" class="active">Home</a>
      <a href="movies.html">Movies</a>
      <a href="tv_shows.html">TV Shows</a>
      <a href="cinema_guide.html">Cinema Guide</a>
      <a href="about_us.html">About Us</a>
      <a href="profile.html" id="mobileProfileLink" style="display:none;"><i class="fas fa-user"></i> Profile</a>
      <a href="#" class="mobile-login-btn" id="mobileLoginLink">Login / Register</a>
      <a href="#" class="mobile-logout-btn" id="mobileLogoutLink" style="display:none;">Logout</a>
    </div>
  </div>

  <main>
    <!-- Hero Section with dynamic background and content -->
    <section id="heroSection" class="hero-section">
      <div class="hero-content">
        <div class="hero-show-card">
            <img src="" alt="Show Poster" class="hero-poster" id="heroPoster">
        </div>
        <div class="hero-quote-card">
            <p class="hero-quote" id="heroQuote"></p>
        </div>
      </div>
      <!-- Removed hero navigation buttons as requested -->
    </section>

    <!-- Category Sections (Dynamic Content) -->
    <section id="categorySections" class="category-sections">
      <!-- Categories and their show cards will be dynamically rendered here by JavaScript -->
    </section>
  </main>

 <!-- Site Footer (Unified Structure) -->
  <footer class="site-footer">
      <div class="footer-content">
          <div class="footer-section about">
              <h3>CineWatch</h3>
              <p>Your ultimate destination for movies and TV shows.</p>
          </div>
          <div class="footer-section quick-links">
              <h3>Quick Links</h3>
              <ul>
                  <li><a href="cinewatch_home.html">Home</a></li>
                  <li><a href="movies.html">Movies</a></li>
                  <li><a href="tv_shows.html">TV Shows</a></li>
                  <li><a href="cinema_guide.html">Cinema Guide</a></li>
              </ul>
          </div>
          <div class="footer-section developer-info">
              <h3>Developer</h3>
              <ul>
                  <li><a href="developer.html">About Alex Malunda</a></li>
                  <li><a href="https://github.com/Asleki" target="_blank" rel="noopener noreferrer">My GitHub</a></li>
              </ul>
          </div>
          <div class="footer-section legal-links">
              <h3>Legal</h3>
              <ul>
                  <li><a href="privacy_policy.html">Privacy Policy</a></li>
                  <li><a href="termsof_services.html">Terms of Service</a></li>
                  <li><a href="copyright_information.html">Copyright Information</a></li>
                  <li><a href="faqs.html">FAQs</a></li>
                  <li><a href="contact_us.html">Contact Us</a></li>
              </ul>
          </div>
          <div class="footer-section contact-social">
              <h3>Connect With Me</h3>
              <p>Email: <a href="mailto:alexmalunda@aol.com">alexmalunda@aol.com</a></p>
              <p>Last Modified: <span id="last-modified"></span></p>
              <div class="social-icons">
                <a href="https://www.instagram.com/yourprofile" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                      <img src="images/icons&logos/instagram_24dp.svg" alt="Instagram" onerror="this.onerror=null;this.src='https://placehold.co/30x30/000080/FFFFFF?text=Insta';">
                  </a>
                <a href="https://www.facebook.com/aslekiymastamynd" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                    <img src="images/icons&logos/facebook_24dp.svg" alt="Facebook" onerror="this.onerror=null;this.src='https://placehold.co/30x30/000080/FFFFFF?text=FB';">
                </a>
                <a href="https://www.linkedin.com/in/alexmalunda" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                    <img src="images/icons&logos/linkedin_24dp.svg" alt="LinkedIn" onerror="this.onerror=null;this.src='https://placehold.co/30x30/000080/FFFFFF?text=LI';">
                </a>
                <a href="https://x.com/yourhandle" target="_blank" rel="noopener noreferrer" aria-label="X (formerly Twitter)">
                    <img src="images/icons&logos/twitter_24dp.svg" alt="X (formerly Twitter)" onerror="this.onerror=null;this.src='https://placehold.co/30x30/000080/FFFFFF?text=X';">
                </a>
              </div>
          </div>
      </div>
  </footer>

  <!-- Custom Alert/Message Box (controlled by showMessageBox function in JS) -->
  <div id="customAlert" class="custom-alert-overlay">
    <div class="alert-content">
        <i class="fas fa-info-circle alert-icon blue-icon"></i>
        <p id="alertMessage">This is a custom message.</p>
        <button id="closeAlertBtn" class="close-alert-btn">OK</button>
    </div>
  </div>

  <!-- Consolidated JavaScript -->
  <script>
    /*
     * File: main.js (Consolidated)
     * Description: Consolidated core application data, hero slideshow logic,
     * show card rendering, carousel functionality, quote management,
     * and essential utility functions for CineWatch.
     * This version includes a redesigned show card layout and enhanced carousel behavior,
     * and now places hero show posters and quotes into separate cards.
     */

    // --- Data Definitions (Consolidated from multiple original JS files) ---

    // Data for hero slides (used on homepage/discover.html)
    const heroSlides = [
        {
            backdrop: 'images/herobackdrops/allofusaredeadbackdrop.webp',
            poster: 'images/heroposters/allofusaredeadheroposter.webp',
            quote: 'We’re trapped, surrounded by dead things… and by dead people.',
        },
        {
            backdrop: 'images/herobackdrops/breakingbadbackdrop.webp',
            poster: 'images/heroposters/breakingbadheroposter.webp',
            quote: 'I am the one who knocks!',
        },
        {
            backdrop: 'images/herobackdrops/extractionbackdrop.webp',
            poster: 'images/heroposters/extractionheroposter.webp',
            quote: 'You send a boy to do a man\'s job.',
        },
        {
            backdrop: 'images/herobackdrops/moneyheistbackdrop.webp',
            poster: 'images/heroposters/moneyheistheroposter.webp',
            quote: 'The police are just like us. They\'re just doing their job.',
        },
        {
            backdrop: 'images/herobackdrops/prisonbreakbackdrop.webp',
            poster: 'images/heroposters/prisonbreakheroposter.webp',
            quote: 'Get yourself a plan and stick to it.',
        },
        {
            backdrop: 'images/herobackdrops/theboysbackdrop.webp',
            poster: 'images/heroposters/theboysheroposter.webp',
            quote: 'Supes are everywhere. You gotta be careful.',
        },
        {
            backdrop: 'images/herobackdrops/thelastofusbackdrop.webp',
            poster: 'images/heroposters/thelastofusheroposter.webp',
            quote: 'You keep finding something to fight for.',
        },
        {
            backdrop: 'images/herobackdrops/wednesdaybackdrop.webp',
            poster: 'images/heroposters/wednesdayheroposter.webp',
            quote: 'I act as if I do not care, but deep down... I actually do not care.',
        },
    ];

    // Placeholder for user login status (controlled by account dropdown logic)
    // In a real app, this would be managed via session storage or a backend API
    let userLoggedIn = false; // Default to false

    // --- Utility Functions ---

    /**
     * Displays a custom alert/message box to the user.
     * @param {string} message - The message to display.
     * @param {string} iconClasses - Font Awesome classes for the icon (e.g., "fas fa-check-circle green-icon").
     */
    function showMessageBox(message, iconClasses = "fas fa-info-circle blue-icon") {
        const customAlert = document.getElementById('customAlert');
        const alertMessage = document.getElementById('alertMessage');
        const alertIcon = customAlert.querySelector('.alert-icon');
        const closeAlertBtn = document.getElementById('closeAlertBtn');

        if (customAlert && alertMessage && alertIcon && closeAlertBtn) {
            alertMessage.textContent = message;
            // Clear existing icon classes and add new ones
            alertIcon.className = 'alert-icon ' + iconClasses;
            customAlert.classList.add('show'); // Make the alert visible

            // Add event listener to close button (remove it after click to prevent multiple listeners)
            const closeHandler = () => {
                customAlert.classList.remove('show');
                closeAlertBtn.removeEventListener('click', closeHandler);
            };
            closeAlertBtn.addEventListener('click', closeHandler);

            // Optionally, close when clicking outside the alert content
            const overlayClickHandler = (event) => {
                if (event.target === customAlert) {
                    customAlert.classList.remove('show');
                    customAlert.removeEventListener('click', overlayClickHandler);
                }
            };
            customAlert.addEventListener('click', overlayClickHandler);
        } else {
            console.error("MessageBox elements not found. Cannot show message.");
            // Fallback for critical errors (though this shouldn't happen with correct HTML)
            // alert(message);
        }
    }

    /**
     * Toggles dark mode on/off.
     */
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        // Update dark mode icon (moon for light, sun for dark)
        const darkModeToggle = document.getElementById('darkModeToggle');
        if (darkModeToggle) {
            if (document.body.classList.contains('dark-mode')) {
                darkModeToggle.classList.replace('fa-moon', 'fa-sun');
                darkModeToggle.setAttribute('title', 'Toggle Light Mode');
            } else {
                darkModeToggle.classList.replace('fa-sun', 'fa-moon');
                darkModeToggle.setAttribute('title', 'Toggle Dark Mode');
            }
        }
    }

    /**
     * Updates the visibility of login/logout/profile links in the account dropdown.
     * @param {boolean} isLoggedIn - True if the user is logged in, false otherwise.
     */
    function updateAccountDropdown(isLoggedIn) {
        const loginLink = document.getElementById('loginLink');
        const registerLink = document.getElementById('registerLink');
        const profileLink = document.getElementById('profileLink');
        const logoutLink = document.getElementById('logoutLink');
        const mobileLoginLink = document.getElementById('mobileLoginLink');
        const mobileLogoutLink = document.getElementById('mobileLogoutLink');
        const mobileProfileLink = document.getElementById('mobileProfileLink'); // Added mobile profile link

        const accountItems = document.querySelectorAll('.account-item'); // Select all custom account items

        if (isLoggedIn) {
            if (loginLink) loginLink.style.display = 'none';
            if (registerLink) registerLink.style.display = 'none';
            if (profileLink) profileLink.style.display = 'flex'; // Show profile link, use flex for icon alignment
            if (logoutLink) logoutLink.style.display = 'flex';   // Show logout link, use flex for icon alignment
            if (mobileLoginLink) mobileLoginLink.style.display = 'none';
            if (mobileLogoutLink) mobileLogoutLink.style.display = 'flex';
            if (mobileProfileLink) mobileProfileLink.style.display = 'flex';

            // Show other account items
            accountItems.forEach(item => {
                if (item.id !== 'loginLink' && item.id !== 'registerLink' && item.id !== 'logoutLink' && item.id !== 'profileLink') {
                    item.style.display = 'flex';
                }
            });

        } else {
            if (loginLink) loginLink.style.display = 'flex';
            if (registerLink) registerLink.style.display = 'flex';
            if (profileLink) profileLink.style.display = 'none';
            if (logoutLink) logoutLink.style.display = 'none';
            if (mobileLoginLink) mobileLoginLink.style.display = 'flex';
            if (mobileLogoutLink) mobileLogoutLink.style.display = 'none';
            if (mobileProfileLink) mobileProfileLink.style.display = 'none';

            // Hide other account items
            accountItems.forEach(item => {
                if (item.id !== 'loginLink' && item.id !== 'registerLink' && item.id !== 'logoutLink' && item.id !== 'profileLink') {
                    item.style.display = 'none';
                }
            });
        }
        userLoggedIn = isLoggedIn; // Update global login status
    }

    /**
     * Generates an array of unique values for a specified key from a dataset.
     * Used for populating search suggestions (e.g., unique genres, titles).
     * @param {Array<Object>} data - The dataset (e.g., showsData).
     * @param {string} key - The key to extract unique values from (e.g., 'genre', 'title').
     * @returns {Array<string>} An array of unique string values, sorted alphabetically.
     */
    function getUniqueValues(data, key) {
        if (!data || !Array.isArray(data)) return [];
        const unique = new Set();
        data.forEach(item => {
            if (item[key]) {
                if (Array.isArray(item[key])) { // For keys like 'genre' which might be arrays
                    item[key].forEach(subItem => unique.add(subItem.trim()));
                } else {
                    unique.add(item[key].trim());
                }
            }
        });
        return Array.from(unique).sort();
    }

    /**
     * Renders primary search suggestions (e.g., top genres or keywords).
     * This is a placeholder; real implementation would fetch/determine popular terms.
     * @param {HTMLElement} container - The DOM element to render suggestions into.
     */
    function showPrimarySuggestions(container) {
        container.innerHTML = ''; // Clear previous
        const suggestions = ['Action', 'Comedy', 'Drama', 'Sci-Fi', 'Thriller', 'Animation'];
        suggestions.forEach(s => {
            const div = document.createElement('div');
            div.classList.add('suggestion-item', 'primary-suggestion');
            div.textContent = s;
            // In a real app, clicking this would trigger a search
            div.addEventListener('click', () => {
                document.getElementById('searchInput').value = s;
                // Optionally, trigger a search or navigate
                showMessageBox(`Searching for category: ${s}`);
                container.innerHTML = ''; // Clear suggestions
            });
            container.appendChild(div);
        });
        container.classList.add('visible');
    }

    /**
     * Renders scoped suggestions based on a specific attribute (e.g., genres for a show).
     * This is not currently used in the search input but is a helper for structured search.
     * @param {HTMLElement} container - The DOM element to render suggestions into.
     * @param {string[]} values - An array of values to suggest.
     * @param {string} scope - The scope/type of the suggestion (e.g., 'genre', 'actor').
     */
    function renderScopedValueSuggestions(container, values, scope) {
        container.innerHTML = ''; // Clear previous
        if (values.length === 0) {
            container.classList.remove('visible');
            return;
        }
        values.forEach(value => {
            const div = document.createElement('div');
            div.classList.add('suggestion-item');
            div.textContent = `${value} (${scope})`;
            div.dataset.value = value;
            div.dataset.scope = scope;
            container.appendChild(div);
        });
        container.classList.add('visible');
    }

    /**
     * Renders show title suggestions based on user input.
     * @param {HTMLElement} container - The DOM element to render suggestions into.
     * @param {string[]} titles - An array of matching show titles.
     */
    function renderShowTitleSuggestions(container, titles) {
        container.innerHTML = ''; // Clear previous
        if (titles.length === 0) {
            container.classList.remove('visible');
            return;
        }
        titles.slice(0, 10).forEach(title => { // Limit to 10 suggestions
            const div = document.createElement('div');
            div.classList.add('suggestion-item');
            div.textContent = title;
            div.addEventListener('click', () => {
                document.getElementById('searchInput').value = title;
                showMessageBox(`Searching for show: ${title}`);
                container.innerHTML = ''; // Clear suggestions
            });
            container.appendChild(div);
        });
        container.classList.add('visible');
    }

    // --- Hero Slideshow Logic ---
    let currentSlideIndex = 0;

    /**
     * Renders the current hero slide based on `currentSlideIndex`.
     * Updates background, poster, and quote.
     */
    function renderHeroSlides() {
        const heroSection = document.getElementById('heroSection');
        const heroPoster = document.getElementById('heroPoster');
        const heroQuote = document.getElementById('heroQuote');

        if (heroSection && heroPoster && heroQuote && heroSlides.length > 0) {
            const slide = heroSlides[currentSlideIndex];
            heroSection.style.backgroundImage = `url('${slide.backdrop}')`;
            heroPoster.src = slide.poster;
            heroQuote.textContent = slide.quote;
        }
    }

    /**
     * Navigates to the previous hero slide.
     */
    function showPrevSlide() {
        currentSlideIndex = (currentSlideIndex - 1 + heroSlides.length) % heroSlides.length;
        renderHeroSlides();
    }

    /**
     * Navigates to the next hero slide.
     */
    function showNextSlide() {
        currentSlideIndex = (currentSlideIndex + 1) % heroSlides.length;
        renderHeroSlides();
    }

    // --- Dynamic Content Rendering (Show Cards & Carousels) ---

    // Placeholder for show data (In a real app, this would come from a database/API)
    const showsData = [
        {
            id: 'breakingbad',
            title: 'Breaking Bad',
            poster: 'images/showposters/breakingbadposter1.webp',
            genre: ['Drama', 'Crime', 'Thriller'],
            year: 2008,
            rating: 9.5,
            description: 'A high school chemistry teacher diagnosed with lung cancer turns to manufacturing and selling methamphetamine in order to secure his family\'s future.',
            isFeatured: true,
            cast: [
                { name: "Bryan Cranston", bio: "Best known for playing Walter White in Breaking Bad.", appearances: ["Malcolm in the Middle"] },
                { name: "Aaron Paul", bio: "Known for his role as Jesse Pinkman in Breaking Bad.", appearances: ["BoJack Horseman"] },
                { name: "Anna Gunn", bio: "Portrayed Skyler White in Breaking Bad.", appearances: ["Deadwood"] }
            ]
        },
        {
            id: 'moneyheist',
            title: 'Money Heist',
            poster: 'images/showposters/moneyheistposter1.webp',
            genre: ['Crime', 'Drama', 'Thriller'],
            year: 2017,
            rating: 8.3,
            description: 'A mysterious man, "The Professor", recruits a band of eight robbers who take hostages and lock themselves in the Royal Mint of Spain as part of his elaborate plan to execute the biggest heist in history.',
            isFeatured: true,
            cast: [
                { name: "Úrsula Corberó", bio: "Plays Tokyo in Money Heist.", appearances: ["Snatch"] },
                { name: "Álvaro Morte", bio: "Known as The Professor in Money Heist.", appearances: ["The Wheel of Time"] },
                { name: "Itziar Ituño", bio: "Portrays Raquel Murillo (Lisbon) in Money Heist.", appearances: ["Loreak"] }
            ]
        },
        {
            id: 'strangerthings',
            title: 'Stranger Things',
            poster: 'images/showposters/strangerthingsposter1.webp',
            genre: ['Sci-Fi', 'Horror', 'Drama', 'Fantasy'],
            year: 2016,
            rating: 8.7,
            description: 'When a young boy vanishes, a small town uncovers a mystery involving secret experiments, terrifying supernatural forces, and one strange little girl.',
            isFeatured: false,
            cast: [
                { name: "Millie Bobby Brown", bio: "Plays Eleven in Stranger Things.", appearances: ["Enola Holmes"] },
                { name: "Finn Wolfhard", bio: "Portrays Mike Wheeler in Stranger Things.", appearances: ["IT"] },
                { name: "Winona Ryder", bio: "Known for her role as Joyce Byers in Stranger Things.", appearances: ["Beetlejuice"] }
            ]
        },
        {
            id: 'theboys',
            title: 'The Boys',
            poster: 'images/showposters/theboysposter.webp',
            genre: ['Action', 'Comedy', 'Drama', 'Sci-Fi'],
            year: 2019,
            rating: 8.7,
            description: 'A group of vigilantes known informally as "The Boys" set out to take down corrupt superheroes with no more than blue-collar grit and a willingness to fight dirty.',
            isFeatured: true,
            cast: [
                { name: "Karl Urban", bio: "Plays Billy Butcher in The Boys.", appearances: ["Lord of the Rings"] },
                { name: "Jack Quaid", bio: "Portrays Hughie Campbell in The Boys.", appearances: ["Scream"] },
                { name: "Antony Starr", bio: "Known for his role as Homelander in The Boys.", appearances: ["Banshee"] }
            ]
        },
        {
            id: 'wednesday',
            title: 'Wednesday',
            poster: 'images/showposters/wednesdayposter.webp',
            genre: ['Comedy', 'Crime', 'Fantasy'],
            year: 2022,
            rating: 8.2,
            description: 'Wednesday Addams investigates a monstrous mystery at the school she attends.',
            isFeatured: false,
            cast: [
                { name: "Jenna Ortega", bio: "Plays Wednesday Addams.", appearances: ["Scream"] },
                { name: "Gwendoline Christie", bio: "Portrays Larissa Weems.", appearances: ["Game of Thrones"] },
                { name: "Catherine Zeta-Jones", bio: "Known as Morticia Addams.", appearances: ["Chicago"] }
            ]
        },
        {
            id: 'thecrown',
            title: 'The Crown',
            poster: 'images/showposters/thecrownposter.webp',
            genre: ['Drama', 'History', 'Biography'],
            year: 2016,
            rating: 8.7,
            description: 'Follows the political rivalries and romance of Queen Elizabeth II\'s reign and the events that shaped the second half of the 20th century.',
            isFeatured: false,
            cast: [
                { name: "Claire Foy", bio: "Played Queen Elizabeth II in early seasons.", appearances: ["First Man"] },
                { name: "Olivia Colman", bio: "Played Queen Elizabeth II in middle seasons.", appearances: ["The Favourite"] },
                { name: "Imelda Staunton", bio: "Played Queen Elizabeth II in later seasons.", appearances: ["Harry Potter"] }
            ]
        },
        {
            id: 'thequeensgambit',
            title: 'The Queen\'s Gambit',
            poster: 'images/showposters/thequeensgambitposter.webp',
            genre: ['Drama'],
            year: 2020,
            rating: 8.6,
            description: 'Orphaned at nine, prodigious chess prodigy Beth Harmon struggles with addiction in a quest to become the greatest chess player in the world.',
            isFeatured: false,
            cast: [
                { name: "Anya Taylor-Joy", bio: "Plays Beth Harmon.", appearances: ["The Witch"] },
                { name: "Thomas Brodie-Sangster", bio: "Portrays Benny Watts.", appearances: ["Love Actually"] }
            ]
        },
        {
            id: 'allofusaredead',
            title: 'All of Us Are Dead',
            poster: 'images/showposters/allofusaredeadposter.webp',
            genre: ['Action', 'Drama', 'Fantasy', 'Horror'],
            year: 2022,
            rating: 7.5,
            description: 'A high school becomes ground zero for a zombie virus outbreak. Trapped students must fight their way out or turn into one of the infected.',
            isFeatured: true,
            cast: [
                { name: "Park Ji-hu", bio: "Plays Nam On-jo.", appearances: ["House of Hummingbird"] },
                { name: "Yoon Chan-young", bio: "Portrays Lee Cheong-san.", appearances: ["Doctor John"] }
            ]
        },
        {
            id: 'squidgame',
            title: 'Squid Game',
            poster: 'images/showposters/squidgameposter1.webp',
            genre: ['Action', 'Drama', 'Mystery', 'Thriller'],
            year: 2021,
            rating: 8.0,
            description: 'Hundreds of cash-strapped players accept a strange invitation to compete in children\'s games. Inside, a tempting prize awaits with deadly high stakes.',
            isFeatured: false,
            cast: [
                { name: "Lee Jung-jae", bio: "Plays Seong Gi-hun.", appearances: ["Deliver Us From Evil"] },
                { name: "Park Hae-soo", bio: "Portrays Cho Sang-woo.", appearances: ["Prison Playbook"] }
            ]
        },
        {
            id: 'thelastofus',
            title: 'The Last of Us',
            poster: 'images/showposters/thelastofusposter.webp',
            genre: ['Action', 'Adventure', 'Drama', 'Sci-Fi'],
            year: 2023,
            rating: 8.8,
            description: 'After a global pandemic destroys civilization, a hardened survivor takes charge of a 14-year-old girl who may be humanity\'s last hope.',
            isFeatured: true,
            cast: [
                { name: "Pedro Pascal", bio: "Plays Joel Miller.", appearances: ["The Mandalorian"] },
                { name: "Bella Ramsey", bio: "Portrays Ellie Williams.", appearances: ["Game of Thrones"] }
            ]
        },
        {
            id: 'thewitcher',
            title: 'The Witcher',
            poster: 'images/showposters/thewitcherposter.webp',
            genre: ['Action', 'Adventure', 'Drama', 'Fantasy'],
            year: 2019,
            rating: 8.2,
            description: 'Geralt of Rivia, a mutated monster-hunter for hire, journeys toward his destiny in a turbulent world where people often prove more wicked than beasts.',
            isFeatured: false,
            cast: [
                { name: "Henry Cavill", bio: "Plays Geralt of Rivia.", appearances: ["Man of Steel"] },
                { name: "Freya Allan", bio: "Portrays Ciri.", appearances: ["The War of the Worlds"] }
            ]
        },
        {
            id: 'arcane',
            title: 'Arcane',
            poster: 'images/showposters/arcaneposter.webp',
            genre: ['Animation', 'Action', 'Adventure', 'Fantasy'],
            year: 2021,
            rating: 9.0,
            description: 'Set in utopian Piltover and the oppressed underground of Zaun, the story follows the origins of two iconic League of Legends champions and the power that will tear them apart.',
            isFeatured: false,
            cast: [
                { name: "Hailee Steinfeld", bio: "Voice of Vi.", appearances: ["Bumblebee"] },
                { name: "Ella Purnell", bio: "Voice of Jinx.", appearances: ["Yellowjackets"] }
            ]
        },
        {
            id: 'peakyblinders',
            title: 'Peaky Blinders',
            poster: 'images/showposters/peakyblindersposter.webp',
            genre: ['Crime', 'Drama'],
            year: 2013,
            rating: 8.8,
            description: 'A gangster family epic set in Birmingham, England in 1919, centering on a gang who sew razor blades in the peaks of their caps, and their ferocious boss Tommy Shelby.',
            isFeatured: false,
            cast: [
                { name: "Cillian Murphy", bio: "Plays Thomas Shelby.", appearances: ["Inception"] },
                { name: "Helen McCrory", bio: "Portrays Polly Gray.", appearances: ["Harry Potter"] }
            ]
        },
        {
            id: 'dark',
            title: 'Dark',
            poster: 'images/showposters/darkposter.webp',
            genre: ['Crime', 'Drama', 'Mystery', 'Sci-Fi'],
            year: 2017,
            rating: 8.7,
            description: 'A family saga with a supernatural twist, set in a German town, where the disappearance of two young children exposes the double lives and fractured relationships among four families.',
            isFeatured: false,
            cast: [
                { name: "Louis Hofmann", bio: "Plays Jonas Kahnwald.", appearances: ["Land of Mine"] },
                { name: "Lisa Vicari", bio: "Portrays Martha Nielsen.", appearances: ["Isi & Ossi"] }
            ]
        },
        {
            id: 'theoffice_us',
            title: 'The Office (US)',
            poster: 'images/showposters/theofficeposter1.webp',
            genre: ['Comedy'],
            year: 2005,
            rating: 9.0,
            description: 'A mockumentary on the everyday lives of a group of office employees in the Scranton, Pennsylvania, branch of the fictional Dunder Mifflin Paper Company.',
            isFeatured: false,
            cast: [
                { name: "Steve Carell", bio: "Plays Michael Scott.", appearances: ["Despicable Me"] },
                { name: "Rainn Wilson", bio: "Portrays Dwight Schrute.", appearances: ["Megamind"] },
                { name: "John Krasinski", bio: "Known for his role as Jim Halpert.", appearances: ["A Quiet Place"] }
            ]
        },
        {
            id: 'friends',
            title: 'Friends',
            poster: 'images/showposters/friendsposter.webp',
            genre: ['Comedy', 'Romance'],
            year: 1994,
            rating: 8.9,
            description: 'Follows the personal and professional lives of six twenty-somethings living in Manhattan.',
            isFeatured: false,
            cast: [
                { name: "Jennifer Aniston", bio: "Plays Rachel Green.", appearances: ["Bruce Almighty"] },
                { name: "Courteney Cox", bio: "Portrays Monica Geller.", appearances: ["Scream"] },
                { name: "Lisa Kudrow", bio: "Plays Phoebe Buffay.", appearances: ["Romy and Michele's High School Reunion"] }
            ]
        },
        {
            id: 'gameofthrones',
            title: 'Game of Thrones',
            poster: 'images/showposters/gameofthronesposter.webp',
            genre: ['Action', 'Adventure', 'Drama', 'Fantasy'],
            year: 2011,
            rating: 9.3,
            description: 'Nine noble families fight for control over the mythical lands of Westeros, while an ancient enemy returns after being dormant for thousands of years.',
            isFeatured: false,
            cast: [
                { name: "Emilia Clarke", bio: "Plays Daenerys Targaryen.", appearances: ["Me Before You"] },
                { name: "Kit Harington", bio: "Portrays Jon Snow.", appearances: ["Eternals"] },
                { name: "Peter Dinklage", bio: "Known for his role as Tyrion Lannister.", appearances: ["The Chronicles of Narnia"] }
            ]
        },
        {
            id: 'thewalkingdead',
            title: 'The Walking Dead',
            poster: 'images/showposters/thewalkingdeadposter.webp',
            genre: ['Drama', 'Horror', 'Sci-Fi', 'Thriller'],
            year: 2010,
            rating: 8.1,
            description: 'Sheriff Deputy Rick Grimes wakes up from a coma to learn the world is in ruins and must lead a group of survivors to stay alive.',
            isFeatured: true,
            cast: [
                { name: "Andrew Lincoln", bio: "Plays Rick Grimes.", appearances: ["Love Actually"] },
                { name: "Norman Reedus", bio: "Portrays Daryl Dixon.", appearances: ["Death Stranding"] }
            ]
        },
        {
            id: 'chernobyl',
            title: 'Chernobyl',
            poster: 'images/showposters/chernobylposter.webp',
            genre: ['Drama', 'History', 'Thriller'],
            year: 2019,
            rating: 9.4,
            description: 'In April 1986, an explosion at the Chernobyl nuclear power plant in the Ukrainian SSR becomes one of the world\'s worst man-made catastrophes.',
            isFeatured: false,
            cast: [
                { name: "Jared Harris", bio: "Plays Valery Legasov.", appearances: ["The Curious Case of Benjamin Button"] },
                { name: "Stellan Skarsgård", bio: "Portrays Boris Shcherbina.", appearances: ["Pirates of the Caribbean"] }
            ]
        },
        {
            id: 'extraction',
            title: 'Extraction',
            poster: 'images/showposters/extractionposter1.webp',
            genre: ['Action', 'Thriller'],
            year: 2020,
            rating: 6.7,
            description: 'A black-market mercenary who has nothing to lose is hired to rescue the kidnapped son of an imprisoned international crime lord.',
            isFeatured: true,
            cast: [
                { name: "Chris Hemsworth", bio: "Plays Tyler Rake.", appearances: ["Thor"] },
                { name: "Randeep Hooda", bio: "Portrays Saju Rav.", appearances: ["Highway"] }
            ]
        },
        {
            id: "prisonbreak_series",
            title: "Prison Break",
            poster: "images/showposters/prisonbreakposter1.webp",
            genre: ["Action", "Hollywood", "Crime", "Drama", "Thriller"],
            year: 2005,
            rating: 8.3,
            description: "When his brother, Lincoln Burrows, is wrongly sentenced to death, a structural engineer, Michael Scofield, devises an elaborate plan to break him out of prison—starting by getting incarcerated himself. A thrilling ride full of twists, tension, and brotherly loyalty as they navigate their escape and evade authorities.",
            isFeatured: true,
            cast: [
                { name: "Wentworth Miller", bio: "Plays Michael Scofield.", appearances: ["The Flash"] },
                { name: "Dominic Purcell", bio: "Portrays Lincoln Burrows.", appearances: ["Legends of Tomorrow"] },
                { name: "Sarah Wayne Callies", bio: "Plays Dr. Sara Tancredi.", appearances: ["The Walking Dead"] }
            ]
        },
        {
            id: "inception_movie",
            title: "Inception",
            poster: "images/showposters/inceptioposter1.webp",
            genre: ["Hollywood", "Action", "Sci-Fi", "Thriller"],
            year: 2010,
            rating: 8.8,
            description: "A thief who steals corporate secrets through use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O., but his tragic past may doom the mission and his team to disaster.",
            isFeatured: false,
            cast: [
                { name: "Leonardo DiCaprio", bio: "Plays Dom Cobb.", appearances: ["Titanic"] },
                { name: "Joseph Gordon-Levitt", bio: "Portrays Arthur.", appearances: ["500 Days of Summer"] },
                { name: "Elliot Page", bio: "Plays Ariadne.", appearances: ["Juno"] }
            ]
        },
        {
            id: "yourhonor_series",
            title: "Your Honor",
            poster: "images/showposters/yourhonorposter1.webp",
            genre: ["Hollywood", "Coming Soon", "Crime", "Drama", "Thriller"],
            year: 2024, // Assuming 2024 for "Expected Premier"
            rating: "Expected",
            description: "A respected New Orleans judge's life is turned upside down when his teenage son is involved in a hit-and-run, leading to a high-stakes game of lies, deceit, and impossible choices to protect his family. Season 3 is highly anticipated.",
            isFeatured: false,
            cast: [
                { name: "Bryan Cranston", bio: "Plays Michael Desiato, the judge.", appearances: ["Breaking Bad"] },
                { name: "Hunter Doohan", bio: "Portrays Adam Desiato, Michael's son.", appearances: ["Wednesday"] }
            ]
        },
        {
            id: "3idiots_movie",
            title: "3 Idiots",
            poster: "images/showposters/3idiotsposter1.webp",
            genre: ["Bollywood", "Comedy", "Drama", "Romance"],
            year: 2009,
            rating: 8.4,
            description: "Two friends embark on a quest for a third, long-lost friend, while reminiscing about their college days and the profound impact their eccentric, brilliant buddy had on their lives and perspectives on education and success.",
            isFeatured: false,
            cast: [
                { name: "Aamir Khan", bio: "Plays Rancho.", appearances: ["Dangal"] },
                { name: "R. Madhavan", bio: "Portrays Farhan Qureshi.", appearances: ["Rehnaa Hai Terre Dil Mein"] },
                { name: "Sharman Joshi", bio: "Plays Raju Rastogi.", appearances: ["Rang De Basanti"] }
            ]
        },
        {
            id: "ghoul_series",
            title: "Ghoul",
            poster: "images/showposters/ghoulposter1.webp",
            genre: ["Bollywood", "Horror", "Thriller"],
            year: 2018,
            rating: 7.1,
            description: "A newly appointed interrogator arrives at a remote military detention center to question a dangerous terrorist, only to discover that the detainee is not what he seems and harbors a terrifying supernatural entity.",
            isFeatured: false,
            cast: [
                { name: "Radhika Apte", bio: "Plays Nida Rahim.", appearances: ["Sacred Games"] },
                { name: "Manav Kaul", bio: "Portrays Colonel Dacunha.", appearances: ["Jolly LLB 2"] }
            ]
        },
        {
            id: "dangal_movie",
            title: "Dangal",
            poster: "images/showposters/dangalposter1.webp",
            genre: ["Bollywood", "Biography", "Drama", "Sport"],
            year: 2016,
            rating: 8.3,
            description: "Based on the true story of Mahavir Singh Phogat, a former wrestler who trains his daughters Geeta Phogat and Babita Kumari to become world-class female wrestlers, challenging societal norms and achieving international success.",
            isFeatured: false,
            cast: [
                { name: "Aamir Khan", bio: "Plays Mahavir Singh Phogat.", appearances: ["3 Idiots"] },
                { name: "Fatima Sana Shaikh", bio: "Portrays Geeta Phogat.", appearances: ["Thugs of Hindostan"] }
            ]
        },
        {
            id: "nairobihalflife_movie",
            title: "Nairobi Half Life",
            poster: "images/showposters/nairobihalflifeposter1.webp",
            genre: ["Kenyan Drama", "Crime", "Drama"],
            year: 2012,
            rating: 7.8,
            description: "Nairobi Half Life tells the story of Mwas, an aspiring actor from a rural town who travels to Nairobi to pursue his dreams. Faced with harsh city life, he’s pulled into a world of crime and must struggle to stay true to his dreams while surviving the city’s brutal realities. It's a powerful and gritty portrayal of urban life in Kenya.",
            isFeatured: false,
            cast: [
                { name: "Joseph Wairimu", bio: "Plays Mwas.", appearances: ["Disconnect"] },
                { name: "Olwenya Maina", bio: "Portrays Oti.", appearances: ["Poacher"] }
            ]
        },
        {
            id: "crimeandjustice_series",
            title: "Crime and Justice",
            poster: "images/showposters/crimeandjusticeposter1.webp",
            genre: ["Kenyan Drama", "Trending", "Coming Soon", "Crime", "Drama", "Legal"],
            year: 2021,
            rating: 7.0,
            description: "A Kenyan police procedural series that follows two detectives as they investigate various crimes in Nairobi. The show delves into the dark side of the city, exploring themes of corruption, greed, and the pursuit of justice.",
            isFeatured: true,
            cast: [
                { name: "Sarah Hassan", bio: "Plays Detective Makena.", appearances: ["Just In Time"] },
                { name: "Alfred Munyua", bio: "Portrays Detective Silas.", appearances: ["Sense8"] }
            ]
        },
        {
            id: "dayofthejackal_series",
            title: "The Day Of The Jackal",
            poster: "images/showposters/thedayofthejackalposter1.webp",
            genre: ["International", "Coming Soon", "Thriller"],
            year: 2024, // Assuming 2024 for "Expected Premier"
            rating: "Expected",
            description: "An upcoming modern-day reimagining of the iconic novel and film, following a professional assassin known as 'The Jackal' as he undertakes a mission to assassinate a high-profile target.",
            isFeatured: false,
            cast: [
                { name: "Eddie Redmayne", bio: "Plays The Jackal.", appearances: ["The Theory of Everything"] },
                { name: "Lashana Lynch", bio: "Plays a MI6 agent.", appearances: ["No Time to Die"] }
            ]
        },
        {
            id: "traintobusan_movie",
            title: "Train To Busan",
            poster: "images/showposters/traintobusanposter1.webp",
            genre: ["K-Drama", "Action", "Horror", "Thriller"],
            year: 2016,
            rating: 7.6,
            description: "While a zombie apocalypse breaks out in South Korea, a father and daughter, along with other passengers, are trapped on a high-speed train fighting for their lives as the infection spreads rapidly.",
            isFeatured: false,
            cast: [
                { name: "Gong Yoo", bio: "Plays Seok-woo.", appearances: ["Goblin"] },
                { name: "Jung Yu-mi", bio: "Portrays Seong-kyeong.", appearances: ["Kim Ji-young, Born 1982"] }
            ]
        },
        {
            id: "secondwife_series",
            title: "Second Wife",
            poster: "images/showposters/secondfamilyposter1.webp",
            genre: ["Kenyan Drama", "Coming Soon", "Drama"],
            year: "TBA",
            rating: "Expected",
            description: "Details for 'Second Wife' are scarce, but it's expected to be a compelling Kenyan drama exploring familial and marital complexities, possibly revolving around the theme of polygamy or a new spouse in a family.",
            isFeatured: false,
            cast: [
                { name: "Brenda Wairimu", bio: "Prominent Kenyan actress.", appearances: ["Disconnect"] },
                { name: "Daniel Weke", bio: "Kenyan actor.", appearances: ["Pray & Prey"] }
            ]
        },
        {
            id: "40sticks_movie",
            title: "40 Sticks",
            poster: "images/showposters/40sticksposter1.webp",
            genre: ["Kenyan Drama", "Action", "Crime", "Thriller"],
            year: 2020,
            rating: 6.2,
            description: "When a prison bus crashes in the middle of a forest, a group of convicts must work together to survive the harsh wilderness while evading an unknown, deadly threat lurking in the shadows.",
            isFeatured: false,
            cast: [
                { name: "Robert Agengo", bio: "Plays inmate 'Zulu'.", appearances: ["Selina"] },
                { name: "Mwaura Bilal", bio: "Plays inmate 'Chaos'.", appearances: ["Nafsi"] }
            ]
        },
        {
            id: "kingdom_series",
            title: "Kingdom",
            poster: "images/showposters/kingdomposter1.webp",
            genre: ["K-Drama", "Action", "Horror", "Thriller"],
            year: 2019,
            rating: 8.3,
            description: "While strange rumors about their ill King grip a kingdom, the crown prince becomes their only hope against a mysterious plague that is turning people into zombies.",
            isFeatured: false,
            cast: [
                { name: "Ju Ji-hoon", bio: "Plays Crown Prince Lee Chang.", appearances: ["Princess Hours"] },
                { name: "Ryu Seung-ryong", bio: "Portrays Cho Hak-ju.", appearances: ["Miracle in Cell No. 7"] }
            ]
        },
        {
            id: "thegoodplace",
            title: "The Good Place",
            poster: "images/showposters/thegoodplaceposter.webp",
            genre: ['Comedy', 'Fantasy', 'Drama'],
            year: 2016,
            rating: 8.2,
            description: 'Four people and their otherworldly architect struggle in the afterlife to define what it means to be good.',
            isFeatured: false,
            cast: [
                { name: "Kristen Bell", bio: "Plays Eleanor Shellstrop.", appearances: ["Frozen"] },
                { name: "Ted Danson", bio: "Portrays Michael.", appearances: ["Cheers"] }
            ]
        },
        {
            id: "mandolorian",
            title: "The Mandalorian",
            poster: "images/showposters/mandolorianposter.webp",
            genre: ['Sci-Fi', 'Action', 'Adventure'],
            year: 2019,
            rating: 8.7,
            description: 'The travels of a lone bounty hunter in the outer reaches of the galaxy, far from the authority of the New Republic.',
            isFeatured: true,
            cast: [
                { name: "Pedro Pascal", bio: "Plays Din Djarin (The Mandalorian).", appearances: ["The Last of Us"] },
                { name: "Grogu (Baby Yoda)", bio: "A Force-sensitive infant.", appearances: ["None (original character)"] }
            ]
        },
        {
            id: "severance",
            title: "Severance",
            poster: "images/showposters/severanceposter.webp",
            genre: ['Sci-Fi', 'Drama', 'Thriller'],
            year: 2022,
            rating: 8.7,
            description: 'A team of employees whose memories have been surgically divided between their work and personal lives discover the true nature of their jobs.',
            isFeatured: false,
            cast: [
                { name: "Adam Scott", bio: "Plays Mark Scout.", appearances: ["Parks and Recreation"] },
                { name: "Britt Lower", bio: "Portrays Helly R.", appearances: ["Man Seeking Woman"] }
            ]
        },
        {
            id: "tedlasso",
            title: "Ted Lasso",
            poster: "images/showposters/tedlassoposter.webp",
            genre: ['Comedy', 'Sport'],
            year: 2020,
            rating: 8.8,
            description: 'American football coach Ted Lasso is hired to manage a British soccer team, despite having no experience coaching soccer.',
            isFeatured: true,
            cast: [
                { name: "Jason Sudeikis", bio: "Plays Ted Lasso.", appearances: ["Saturday Night Live"] },
                { name: "Hannah Waddingham", bio: "Portrays Rebecca Welton.", appearances: ["Game of Thrones"] }
            ]
        },
        {
            id: "fleabag",
            title: "Fleabag",
            poster: "images/showposters/fleabagposter.webp",
            genre: ['Comedy', 'Drama'],
            year: 2016,
            rating: 8.7,
            description: 'A cynical woman navigates modern life in London while dealing with tragedy.',
            isFeatured: false,
            cast: [
                { name: "Phoebe Waller-Bridge", bio: "Plays Fleabag and is the creator.", appearances: ["Solo: A Star Wars Story"] },
                { name: "Andrew Scott", bio: "Portrays The Hot Priest.", appearances: ["Sherlock"] }
            ]
        },
        {
            id: "narcos",
            title: "Narcos",
            poster: "images/showposters/narcosposter.webp",
            genre: ['Biography', 'Crime', 'Drama'],
            year: 2015,
            rating: 8.8,
            description: 'A chronicled look at the criminal exploits of Colombian drug lord Pablo Escobar, as well as the many other drug kingpins who plagued the country through the years.',
            isFeatured: true,
            cast: [
                { name: "Wagner Moura", bio: "Plays Pablo Escobar.", appearances: ["Elite Squad"] },
                { name: "Boyd Holbrook", bio: "Portrays Steve Murphy.", appearances: ["Logan"] }
            ]
        },
        {
            id: "theboys_presents_diabolical",
            title: "The Boys Presents: Diabolical",
            poster: "images/showposters/theboysdiabolicalposter.webp",
            genre: ['Animation', 'Action', 'Comedy'],
            year: 2022,
            rating: 7.3,
            description: 'An animated anthology series set in the universe of The Boys.',
            isFeatured: false,
            cast: [
                { name: "Seth Rogen", bio: "Voice actor and executive producer.", appearances: ["Superbad"] },
                { name: "Andy Samberg", bio: "Voice actor.", appearances: ["Brooklyn Nine-Nine"] }
            ]
        },
        {
            id: "houseofthedragon",
            title: "House of the Dragon",
            poster: "images/showposters/houseofthedragonposter.webp",
            genre: ['Action', 'Adventure', 'Drama', 'Fantasy'],
            year: 2022,
            rating: 8.5,
            description: 'The story of the Targaryen civil war that took place about 200 years before the events of Game of Thrones.',
            isFeatured: true,
            cast: [
                { name: "Paddy Considine", bio: "Plays King Viserys I Targaryen.", appearances: ["Hot Fuzz"] },
                { name: "Matt Smith", bio: "Portrays Prince Daemon Targaryen.", appearances: ["Doctor Who"] }
            ]
        },
        {
            id: "winningtime",
            title: "Winning Time: The Rise of the Lakers Dynasty",
            poster: "images/showposters/winningtimeposter.webp",
            genre: ['Biography', 'Drama', 'Sport'],
            year: 2022,
            rating: 8.2,
            description: 'A fast-break series about the professional and personal lives of the 1980s Los Angeles Lakers basketball team, one of sports\' most revered and dominant dynasties -- a team that defined an era, both on and off the court.',
            isFeatured: false,
            cast: [
                { name: "Quincy Isaiah", bio: "Plays Magic Johnson.", appearances: ["Off the Rails"] },
                { name: "Solomon Hughes", bio: "Portrays Kareem Abdul-Jabbar.", appearances: ["No Other Way to Say It"] }
            ]
        }
    ];


    /**
     * Creates an HTML string for a single show card.
     * @param {Object} show - The show object with details like title, poster, genre, etc.
     * @returns {string} The HTML string for the show card.
     */
    function createShowCardHtml(show) {
        // Determine the primary genre for display, or show "Various" if multiple or none
        const primaryGenre = Array.isArray(show.genre) && show.genre.length > 0
            ? show.genre[0]
            : 'Various';

        // Get first 3 cast names or a default message
        const castNames = show.cast && show.cast.length > 0
            ? show.cast.slice(0, 3).map(c => c.name).join(', ') + (show.cast.length > 3 ? '...' : '')
            : 'Cast info N/A';

        return `
            <div class="show-card" data-id="${show.id}" data-title="${encodeURIComponent(show.title)}">
                <div class="show-card-poster-container">
                    <img src="${show.poster}" alt="${show.title} Poster" class="show-card-poster" onerror="this.onerror=null;this.src='https://placehold.co/250x350/333/fff?text=No+Poster';">
                    <div class="play-button-overlay">
                        <i class="fas fa-play-circle play-icon"></i>
                    </div>
                </div>
                <div class="show-card-details">
                    <h3 class="show-card-title">${show.title}</h3>
                    <div class="show-card-meta">
                        <span class="show-card-genre">${primaryGenre}</span>
                        <span class="show-card-year">${show.year}</span>
                        <span class="show-card-rating"><i class="fas fa-star"></i> ${show.rating}</span>
                    </div>
                    <p class="show-card-description">${show.description}</p>
                    <p class="show-card-cast"><strong>Cast:</strong> ${castNames}</p>
                    <div class="show-card-actions">
                        <button class="add-to-watchlist-btn" data-id="${show.id}">
                            <i class="fas fa-plus"></i> Add
                        </button>
                        <button class="share-btn" data-id="${show.id}">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                    </div>
                </div>
            </div>
        `;
    }

    /**
     * Renders a single category section with its title and a carousel of show cards.
     * @param {HTMLElement} container - The DOM element to append the category section to.
     * @param {string} categoryTitle - The title of the category (e.g., "Featured Shows").
     * @param {Array<Object>} shows - An array of show objects for this category.
     */
    function renderCategorySection(container, categoryTitle, shows) {
        if (!container || !Array.isArray(shows) || shows.length === 0) {
            console.warn(`Skipping rendering for category "${categoryTitle}": missing container or no shows.`);
            return;
        }

        const sectionId = categoryTitle.toLowerCase().replace(/\s+/g, '-').replace(/&/g, 'and'); // e.g., "featured-shows"

        const categoryHtml = `
            <div class="category-section" id="${sectionId}">
                <h2 class="category-title">${categoryTitle}</h2>
                <div class="carousel-container">
                    <button class="carousel-nav-btn prev"><i class="fas fa-chevron-left"></i></button>
                    <div class="carousel-track">
                        <!-- Show cards will be injected here -->
                    </div>
                    <button class="carousel-nav-btn next"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        `;

        container.insertAdjacentHTML('beforeend', categoryHtml);

        const carouselTrack = document.querySelector(`#${sectionId} .carousel-track`);
        if (carouselTrack) {
            shows.forEach(show => {
                carouselTrack.insertAdjacentHTML('beforeend', createShowCardHtml(show));
            });
            setupCarouselNavigation(carouselTrack.parentElement); // Pass the carousel-container

            // Add click listener to each show card to navigate to details.html
            carouselTrack.querySelectorAll('.show-card').forEach(card => {
                card.addEventListener('click', (event) => {
                    // Prevent navigation if an action button was clicked
                    if (event.target.closest('.add-to-watchlist-btn') || event.target.closest('.share-btn') || event.target.closest('.play-button-overlay')) {
                        return;
                    }
                    const showTitle = card.dataset.title;
                    if (showTitle) {
                        window.location.href = `details.html?title=${showTitle}`;
                    }
                });
                // Also explicitly add click listener for title to navigate
                card.querySelector('.show-card-title').addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent card click from double-firing
                    const showTitle = card.dataset.title;
                    if (showTitle) {
                        window.location.href = `details.html?title=${showTitle}`;
                    }
                });
            });

            // Add click listener for "Add to Watchlist" buttons
            carouselTrack.querySelectorAll('.add-to-watchlist-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent click from bubbling to the parent show card
                    if (!userLoggedIn) {
                        showMessageBox("You must be logged in to add shows to your watchlist!", "fas fa-exclamation-triangle red-icon");
                    } else {
                        showMessageBox("Redirecting to settings for watchlist management (simulated)...", "fas fa-info-circle blue-icon");
                        // Simulate redirect to settings page
                        window.location.href = 'settings.html';
                    }
                });
            });

            // Add click listener for "Play" icon overlay
            carouselTrack.querySelectorAll('.play-button-overlay').forEach(overlay => {
                overlay.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent click from bubbling to the parent show card
                    showMessageBox("Playing show (simulated)! Enjoy!", "fas fa-play-circle blue-icon");
                });
            });

            // Add click listener for "Share" buttons
            carouselTrack.querySelectorAll('.share-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent click from bubbling to the parent show card
                    const showTitle = decodeURIComponent(button.closest('.show-card').dataset.title);
                    showMessageBox(`Sharing "${showTitle}" (simulated)!`, "fas fa-share-alt green-icon");
                });
            });

        } else {
            console.error(`Carousel track not found for category: ${categoryTitle}`);
        }
    }

    /**
     * Sets up event listeners for carousel navigation buttons.
     * @param {HTMLElement} carouselContainer - The .carousel-container element.
     */
    function setupCarouselNavigation(carouselContainer) {
        const prevBtn = carouselContainer.querySelector('.carousel-nav-btn.prev');
        const nextBtn = carouselContainer.querySelector('.carousel-nav-btn.next');
        const carouselTrack = carouselContainer.querySelector('.carousel-track');

        if (!prevBtn || !nextBtn || !carouselTrack) {
            console.warn('Missing carousel elements for navigation setup.', carouselContainer);
            return;
        }

        let scrollAmount = 0; // Tracks the current scroll position

        const scrollCarousel = (direction) => {
            const card = carouselTrack.querySelector('.show-card');
            if (!card) return;

            const cardWidth = card.offsetWidth + parseFloat(getComputedStyle(card).marginRight || '0'); // Card width + margin
            const cardsPerView = Math.floor(carouselTrack.clientWidth / cardWidth);
            const scrollBy = cardsPerView * cardWidth;

            const containerWidth = carouselTrack.clientWidth;
            const maxScroll = carouselTrack.scrollWidth - containerWidth;


            if (direction === 'next') {
                scrollAmount += scrollBy;
                if (scrollAmount > maxScroll) {
                    scrollAmount = 0; // Loop to start
                }
            } else { // 'prev'
                scrollAmount -= scrollBy;
                if (scrollAmount < 0) {
                    scrollAmount = maxScroll; // Loop to end
                }
            }
            carouselTrack.scrollTo({
                left: scrollAmount,
                behavior: 'smooth'
            });
        };

        nextBtn.addEventListener('click', () => scrollCarousel('next'));
        prevBtn.addEventListener('click', () => scrollCarousel('prev'));
    }


    /**
     * Renders all defined categories to the #categorySections container.
     * This is the main function to call on pages like cinewatch_home.html or discover.html.
     */
    function renderAllCategories() {
        const categorySectionsContainer = document.getElementById('categorySections');
        if (!categorySectionsContainer) {
            console.warn("Category sections container with ID 'categorySections' not found.");
            return;
        }

        // Clear previous content
        categorySectionsContainer.innerHTML = '';

        // Define the order of categories, pulling from unique genres/features
        const categoriesToRender = [
            { title: 'Featured Shows', filter: (show) => show.isFeatured },
            { title: 'Trending Now', filter: (show) => show.genre.includes('Trending') }, // Assuming 'Trending' can be a genre/category
            { title: 'Coming Soon', filter: (show) => show.genre.includes('Coming Soon') || show.year === 'Expected' || show.year === 'TBA' },
            { title: 'Action Packed', filter: (show) => show.genre.includes('Action') },
            { title: 'Dramas', filter: (show) => show.genre.includes('Drama') },
            { title: 'Comedies', filter: (show) => show.genre.includes('Comedy') },
            { title: 'Sci-Fi & Fantasy', filter: (show) => show.genre.includes('Sci-Fi') || show.genre.includes('Fantasy') },
            { title: 'Horror Flicks', filter: (show) => show.genre.includes('Horror') },
            { title: 'Crime & Mystery', filter: (show) => show.genre.includes('Crime') || show.genre.includes('Mystery') },
            { title: 'International Hits', filter: (show) => show.genre.includes('International') }, // Assuming 'International' for non-Hollywood/Bollywood/K-Drama
            { title: 'Bollywood', filter: (show) => show.genre.includes('Bollywood') },
            { title: 'K-Drama', filter: (show) => show.genre.includes('K-Drama') },
            { title: 'Kenyan Originals', filter: (show) => show.genre.includes('Kenyan Drama') },
            { title: 'Biographies', filter: (show) => show.genre.includes('Biography') },
            { title: 'Sports Stories', filter: (show) => show.genre.includes('Sport') },
            { title: 'Animation', filter: (show) => show.genre.includes('Animation') },
        ];


        categoriesToRender.forEach(category => {
            const showsInCategory = showsData.filter(category.filter);
            if (showsInCategory.length > 0) {
                renderCategorySection(categorySectionsContainer, category.title, showsInCategory);
            } else {
                console.log(`No shows found for category: ${category.title}`);
            }
        });
    }


    // --- Event Listeners and Initial Page Load Logic ---

    document.addEventListener("DOMContentLoaded", () => {
        // --- Hero Slideshow Initialization ---
        const heroSection = document.getElementById('heroSection');
        // Removed hero navigation buttons by not selecting them and removing their listeners
        // const heroPrevBtn = document.getElementById('heroPrevBtn'); // Removed
        // const heroNextBtn = document.getElementById('heroNextBtn'); // Removed

        if (heroSection && heroSlides.length > 0) {
            renderHeroSlides(); // Initial render

            // Keep auto-advance, but remove manual navigation buttons' functionality
            setInterval(showNextSlide, 4000); // Change slide every 4 seconds as requested
        } else {
            console.warn("Hero section container with ID 'heroSection' not found or no slides available. Hero slideshow functionality will not work on this page.");
            // If no hero slides, hide the entire hero section or display a fallback
            if (heroSection) heroSection.style.display = 'none'; // Hide if no slides
        }

        // Last Modified Date (footer)
        const lastModifiedSpan = document.getElementById('last-modified');
        if (lastModifiedSpan) {
            lastModifiedSpan.textContent = new Date(document.lastModified).toLocaleDateString();
        } else {
            console.warn("Last Modified span not found.");
        }

        // --- Page-specific function calls ---
        // This ensures functions are only called if their corresponding HTML elements exist
        if (document.getElementById('categorySections')) {
            renderAllCategories(); // For cinewatch_home.html / discover.html
        }

        // --- Account Dropdown Link Handling ---
        document.getElementById('accountDropdown').addEventListener('click', (event) => {
            const target = event.target.closest('a');
            if (!target) return;

            event.preventDefault(); // Prevent default link behavior

            if (target.id === 'loginLink' || target.id === 'registerLink') {
                showMessageBox(`Redirecting to ${target.id.replace('Link', '')} page (simulated)!`);
                // In a real app, you would navigate to login.html or register.html
                // window.location.href = `${target.id.replace('Link', '')}.html`;
            } else if (target.id === 'profileLink' || target.id === 'playlistLink' || target.id === 'bookmarksLink' || target.id === 'favoritesLink') {
                if (userLoggedIn) {
                    showMessageBox(`${target.textContent.trim()} functionality coming soon! Redirecting to settings...`, "fas fa-info-circle blue-icon");
                    window.location.href = 'settings.html'; // Redirect to settings as requested
                } else {
                    showMessageBox("Please log in to access this feature!", "fas fa-exclamation-triangle red-icon");
                }
            } else if (target.id === 'logoutLink') {
                userLoggedIn = false; // Simulate logout
                updateAccountDropdown(userLoggedIn);
                showMessageBox("You have been logged out.", "fas fa-check-circle green-icon");
                document.getElementById('accountDropdown').classList.remove("visible"); // Hide dropdown after logout
            } else if (target.id === 'settingsLink') { // Handles the 'Settings' link
                if (userLoggedIn) {
                    showMessageBox("Redirecting to Settings page...", "fas fa-info-circle blue-icon");
                    window.location.href = 'settings.html';
                } else {
                    showMessageBox("Please log in to access settings!", "fas fa-exclamation-triangle red-icon");
                }
            }
        });

        // --- Header Search and Mobile Nav Logic (from standalone_header.js consolidated) ---
        const searchIcon = document.getElementById("searchIcon");
        const searchSubheader = document.getElementById("searchSubheader");
        const searchInput = document.getElementById("searchInput");
        const clearSearch = document.getElementById("clearSearch");
        const suggestionsBox = document.getElementById("suggestionsBox");
        const darkModeToggle = document.getElementById("darkModeToggle");
        const addIcon = document.getElementById("addIcon");
        const accountIcon = document.getElementById("accountIcon");
        const accountDropdown = document.getElementById("accountDropdown");
        const hamburgerMenu = document.getElementById("hamburgerMenu");
        const mobileNavOverlay = document.getElementById("mobileNavOverlay");

        // Ensure all necessary elements are present
        if (!searchIcon || !searchSubheader || !searchInput || !suggestionsBox ||
            !darkModeToggle || !addIcon || !accountIcon || !accountDropdown ||
            !hamburgerMenu || !mobileNavOverlay) {
            console.error("Critical header elements are missing. Header functionality may be limited.");
            return; // Exit if core dependencies are not met
        }

        // State variables for search
        let searchScope = null; // Can be null (initial), a primary type (e.g., "category"), or a specific filter (e.g., "category:Hollywood")
        let selectedIndex = -1; // For keyboard navigation of suggestions

        // Toggle search bar visibility
        searchIcon.addEventListener("click", () => {
            searchSubheader.classList.toggle("visible");
            if (searchSubheader.classList.contains("visible")) {
                searchInput.focus(); // Focus on input when search bar opens
                if (!searchScope) {
                    showPrimarySuggestions(suggestionsBox); // Show primary filters initially
                }
            } else {
                suggestionsBox.classList.remove("visible"); // Hide suggestions when search bar closes
                searchInput.value = ""; // Clear input
                searchScope = null; // Reset search scope
                selectedIndex = -1; // Reset keyboard selection
            }
        });

        // Clear search input
        clearSearch.addEventListener("click", () => {
            searchInput.value = "";
            searchScope = null; // Reset search scope
            selectedIndex = -1; // Reset keyboard selection
            showPrimarySuggestions(suggestionsBox); // Show primary filters after clearing
            searchInput.focus();
        });

        // Handle input changes in the search bar
        searchInput.addEventListener("input", () => {
            selectedIndex = -1; // Reset keyboard selection on input
            const val = searchInput.value.trim();

            if (!searchScope) {
                // No search scope selected yet
                if (val === "") {
                    showPrimarySuggestions(suggestionsBox); // Show primary filters if input is empty
                } else {
                    renderShowTitleSuggestions(suggestionsBox, showsData.filter(s =>
                        s.title.toLowerCase().includes(val.toLowerCase()) ||
                        (Array.isArray(s.genre) && s.genre.some(g => g.toLowerCase().includes(val.toLowerCase()))) ||
                        (s.cast && s.cast.some(c => c.name.toLowerCase().includes(val.toLowerCase())))
                    ).map(s => s.title)); // Directly search and suggest show titles
                }
            } else {
                // A search scope is active (e.g., "genre")
                const [scopeType, scopeValue] = searchScope.split(':');
                const filteredByScope = showsData.filter(s => {
                    if (scopeType === "genre" && Array.isArray(s.genre)) return s.genre.some(g => g.toLowerCase() === scopeValue.toLowerCase());
                    // Add other scope types as needed (e.g., 'year', 'cast')
                    return true; // If no specific filter for scope type, don't filter
                });
                renderShowTitleSuggestions(suggestionsBox, filteredByScope.filter(s =>
                    s.title.toLowerCase().includes(val.toLowerCase())
                ).map(s => s.title));
            }
        });

        // Handle clicks on suggestions
        suggestionsBox.addEventListener("click", (event) => {
            const target = event.target;
            if (target.classList.contains('suggestion-item')) {
                const suggestionText = target.textContent.trim();
                const showTitleMatch = showsData.find(show => show.title === suggestionText.split(' (')[0]); // Find exact show title

                if (showTitleMatch) {
                    window.location.href = `details.html?title=${encodeURIComponent(showTitleMatch.title)}`;
                } else if (target.classList.contains('primary-suggestion')) {
                    searchScope = `genre:${suggestionText}`; // Set scope to genre for primary suggestions
                    searchInput.value = `${suggestionText}: `;
                    suggestionsBox.classList.remove("visible");
                    searchInput.focus();
                    // Immediately show all shows for the selected genre
                    renderShowTitleSuggestions(suggestionsBox, showsData.filter(s =>
                        Array.isArray(s.genre) && s.genre.some(g => g.toLowerCase() === suggestionText.toLowerCase())
                    ).map(s => s.title));
                }
            }
            selectedIndex = -1; // Reset keyboard selection after click
        });

        // Keyboard navigation for search suggestions
        searchInput.addEventListener("keydown", (e) => {
            const suggestions = suggestionsBox.querySelectorAll(".suggestion-item");
            if (suggestions.length === 0) return;

            if (e.key === "ArrowDown") {
                e.preventDefault();
                selectedIndex = (selectedIndex + 1) % suggestions.length;
                highlightSelectedSuggestion(suggestions, selectedIndex);
            } else if (e.key === "ArrowUp") {
                e.preventDefault();
                selectedIndex = (selectedIndex - 1 + suggestions.length) % suggestions.length;
                highlightSelectedSuggestion(suggestions, selectedIndex);
            } else if (e.key === "Enter") {
                e.preventDefault();
                if (selectedIndex !== -1) {
                    suggestions[selectedIndex].click(); // Simulate click on the highlighted suggestion
                }
            }
        });

        function highlightSelectedSuggestion(suggestions, index) {
            suggestions.forEach((div, i) => {
                if (i === index) {
                    div.classList.add("selected");
                    div.scrollIntoView({ block: "nearest", inline: "nearest" }); // Scroll to highlighted
                } else {
                    div.classList.remove("selected");
                }
            });
        }

        // Hide suggestions and search bar when clicking outside
        document.addEventListener("click", (event) => {
            if (!searchSubheader.contains(event.target) && event.target !== searchIcon) {
                searchSubheader.classList.remove("visible");
                suggestionsBox.classList.remove("visible");
                searchInput.value = "";
                searchScope = null;
                selectedIndex = -1;
            }
            // Hide account dropdown when clicking outside
            if (!accountDropdown.contains(event.target) && event.target !== accountIcon) {
                accountDropdown.classList.remove("visible");
            }
        });


        // --- Account Dropdown Functionality ---
        // userLoggedIn is exposed globally by main.js
        accountIcon.addEventListener("click", () => {
            accountDropdown.classList.toggle("visible");
            updateAccountDropdown(userLoggedIn); // Call the global function
        });

        // --- Dark Mode Toggle ---
        darkModeToggle.addEventListener("click", () => {
            toggleDarkMode(); // Call the global function
        });

        // --- Add Icon Functionality ---
        addIcon.addEventListener('click', (event) => {
            event.preventDefault(); // Prevent default navigation if it's a link
            if (userLoggedIn) {
                showMessageBox("Redirecting to settings for watchlist management (simulated)...", "fas fa-info-circle blue-icon");
                window.location.href = 'settings.html'; // Redirect to settings
            } else {
                showMessageBox("You must be logged in to add shows to your playlist!", "fas fa-exclamation-triangle red-icon");
            }
        });

        // --- Mobile Navigation (Hamburger Menu) ---
        hamburgerMenu.addEventListener('click', () => {
            mobileNavOverlay.classList.add('show');
        });

        // Close mobile nav when clicking on overlay itself or a link inside
        mobileNavOverlay.addEventListener('click', (event) => {
            if (event.target === mobileNavOverlay || event.target.tagName === 'A') {
                mobileNavOverlay.classList.remove('show');
            }
        });
        // Close button inside mobile nav
        document.getElementById('closeMobileNav').addEventListener('click', () => {
            mobileNavOverlay.classList.remove('show');
        });

        // Initial update of account dropdown state
        updateAccountDropdown(userLoggedIn);

        // Set initial dark mode based on local storage
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            const darkModeToggle = document.getElementById('darkModeToggle');
            if (darkModeToggle) {
                darkModeToggle.classList.replace('fa-moon', 'fa-sun');
                darkModeToggle.setAttribute('title', 'Toggle Light Mode');
            }
        }
    });

    // JavaScript to update the current year in the footer
    document.getElementById('current-year').textContent = new Date().getFullYear();

  </script>
</body>
</html>
